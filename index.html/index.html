<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="oJVrfjP_ntA83MdfbD6EfMjvkFnGSQFdty_8FgMy-wk" />
    <meta name="enamad" content="29564479" />
    <title>B\S PARTS - ูุฑูุดฺฏุงู ุชุฎุตุต ููุงุฒู ุฏฺฉ ุฎูุฏุฑููุง ุขููุงู</title>
    <meta name="description" content="ูุฑูุด ููุงุฒู ุฏฺฉ ุงุตู BMWุ ูุฑุณุฏุณ ุจูุฒ ู ูพูุฑุดู ุจุง ฺฏุงุฑุงูุช ูุนุชุจุฑ">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'vazir': ['Vazir', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Vazir:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Vazir', sans-serif; 
            background: #f5f5f7;
        }
        
        .product-card {
            transition: all 0.3s ease;
        }
        
        .product-card:hover { 
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .cart-badge { 
            background: #ff3b30;
        }
        
        .apple-button {
            background: #007aff;
            transition: all 0.2s ease;
        }
        
        .apple-button:hover {
            background: #0056cc;
        }
        
        .apple-nav {
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(20px);
        }
        
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .dropdown-menu {
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }
        
        .dropdown:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .star-rating {
            color: #ffd700;
        }
        
        .out-of-stock {
            opacity: 0.6;
        }
        
        .discount-badge {
            background: #ff3b30;
            color: white;
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
            position: absolute;
            top: 8px;
            right: 8px;
        }
        
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .page-content {
            display: none;
        }
        
        .page-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .dropdown-menu {
                position: fixed !important;
                top: auto !important;
                bottom: 0 !important;
                left: 0 !important;
                right: 0 !important;
                width: 100% !important;
                border-radius: 16px 16px 0 0 !important;
                max-height: 50vh;
                overflow-y: auto;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Contact Bar -->
    <div class="bg-black text-white py-2">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center justify-center space-y-1 md:space-y-0 md:space-x-8 md:space-x-reverse text-xs md:text-sm">
                <div class="flex items-center space-x-2 space-x-reverse">
                    <span>๐ฑ</span>
                    <span class="select-none">ููุจุงู: 09124583607</span>
                </div>
                <div class="flex items-center space-x-2 space-x-reverse">
                    <span>โ๏ธ</span>
                    <span class="select-none">ุฏูุชุฑ: 02136059698</span>
                </div>
                <div class="flex items-center space-x-2 space-x-reverse">
                    <span>๐</span>
                    <span class="hidden md:inline">ุงุฑุณุงู ุฑุงฺฏุงู ุจุงูุง 5 ูููู ุชููุงู</span>
                    <span class="md:hidden">ุงุฑุณุงู ุฑุงฺฏุงู</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="apple-nav border-b border-gray-200 sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between py-3">
                <div class="flex items-center">
                    <div class="text-lg md:text-2xl font-semibold text-gray-900 cursor-pointer" onclick="showPage('home')">B\S PARTS</div>
                </div>
                
                <div class="flex-1 max-w-md md:max-w-2xl mx-4 md:mx-8">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="ุฌุณุชุฌู..." 
                               class="w-full px-3 md:px-4 py-2 bg-gray-100 border-0 rounded-full focus:outline-none focus:bg-white focus:shadow-sm text-sm"
                               onkeyup="searchProducts()" onkeypress="handleSearchEnter(event)">
                        <button onclick="performSearch()" class="absolute left-2 md:left-3 top-2 md:top-2.5 text-gray-400 hover:text-gray-600">๐</button>
                        <div id="searchSuggestions" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 hidden max-h-60 overflow-y-auto z-50">
                            <!-- Search suggestions will appear here -->
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-2 md:space-x-4 space-x-reverse">
                    <button onclick="showUserPanel()" class="text-gray-600 hover:text-gray-900 text-xs md:text-sm flex items-center space-x-1 space-x-reverse">
                        <span>๐ค</span>
                        <span id="userDisplayName" class="hidden md:inline">ูุฑูุฏ</span>
                    </button>
                    <button onclick="showWishlist()" class="relative p-1 md:p-2 text-gray-600 hover:text-gray-900">
                        <span class="text-lg md:text-xl">โค๏ธ</span>
                        <span id="wishlistBadge" class="absolute -top-1 -right-1 text-white text-xs rounded-full w-4 h-4 md:w-5 md:h-5 flex items-center justify-center cart-badge">0</span>
                    </button>
                    <button onclick="showAdminLogin()" class="text-gray-600 hover:text-gray-900 text-xs md:text-sm hidden md:block">
                        ูุฏุฑุช
                    </button>
                    <button onclick="toggleCart()" class="relative p-1 md:p-2 text-gray-600 hover:text-gray-900">
                        <span class="text-lg md:text-xl">๐</span>
                        <span id="cartBadge" class="absolute -top-1 -right-1 text-white text-xs rounded-full w-4 h-4 md:w-5 md:h-5 flex items-center justify-center cart-badge">0</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation with Dropdown Menus -->
    <nav class="bg-white border-b border-gray-100">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-center space-x-2 md:space-x-8 space-x-reverse py-3 text-xs md:text-sm overflow-x-auto">
                <!-- BMW Dropdown -->
                <div class="relative dropdown">
                    <a href="#" onclick="filterByBrand('BMW')" class="text-gray-600 hover:text-gray-900 flex items-center space-x-1 space-x-reverse whitespace-nowrap">
                        <span>BMW</span>
                        <span class="text-xs hidden md:inline">โผ</span>
                    </a>
                    <div class="dropdown-menu absolute top-full right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 w-48 z-40">
                        <a href="#" onclick="filterByCategory('BMW', 'brake')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ููุช ู ุฏุณฺฉ ุชุฑูุฒ</a>
                        <a href="#" onclick="filterByCategory('BMW', 'suspension')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุณุณุชู ุชุนูู</a>
                        <a href="#" onclick="filterByCategory('BMW', 'engine')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ูุทุนุงุช ููุชูุฑ</a>
                        <a href="#" onclick="filterByCategory('BMW', 'front_suspension')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุฌููุจูุฏ</a>
                        <a href="#" onclick="filterByCategory('BMW', 'gearbox')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ฺฏุฑุจฺฉุณ</a>
                        <a href="#" onclick="filterByCategory('BMW', 'electrical')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุณุณุชู ุจุฑู</a>
                        <a href="#" onclick="filterByCategory('BMW', 'body')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ููุงุฒู ุจุฏูู</a>
                    </div>
                </div>
                
                <!-- Mercedes Dropdown -->
                <div class="relative dropdown">
                    <a href="#" onclick="filterByBrand('Mercedes')" class="text-gray-600 hover:text-gray-900 flex items-center space-x-1 space-x-reverse whitespace-nowrap">
                        <span class="hidden md:inline">ูุฑุณุฏุณ ุจูุฒ</span>
                        <span class="md:hidden">ูุฑุณุฏุณ</span>
                        <span class="text-xs hidden md:inline">โผ</span>
                    </a>
                    <div class="dropdown-menu absolute top-full right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 w-48 z-40">
                        <a href="#" onclick="filterByCategory('Mercedes', 'brake')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ููุช ู ุฏุณฺฉ ุชุฑูุฒ</a>
                        <a href="#" onclick="filterByCategory('Mercedes', 'suspension')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุณุณุชู ุชุนูู</a>
                        <a href="#" onclick="filterByCategory('Mercedes', 'engine')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ูุทุนุงุช ููุชูุฑ</a>
                        <a href="#" onclick="filterByCategory('Mercedes', 'front_suspension')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุฌููุจูุฏ</a>
                        <a href="#" onclick="filterByCategory('Mercedes', 'gearbox')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ฺฏุฑุจฺฉุณ</a>
                        <a href="#" onclick="filterByCategory('Mercedes', 'electrical')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุณุณุชู ุจุฑู</a>
                        <a href="#" onclick="filterByCategory('Mercedes', 'body')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ููุงุฒู ุจุฏูู</a>
                    </div>
                </div>
                
                <!-- Porsche Dropdown -->
                <div class="relative dropdown">
                    <a href="#" onclick="filterByBrand('Porsche')" class="text-gray-600 hover:text-gray-900 flex items-center space-x-1 space-x-reverse whitespace-nowrap">
                        <span>ูพูุฑุดู</span>
                        <span class="text-xs hidden md:inline">โผ</span>
                    </a>
                    <div class="dropdown-menu absolute top-full right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 w-48 z-40">
                        <a href="#" onclick="filterByCategory('Porsche', 'brake')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ููุช ู ุฏุณฺฉ ุชุฑูุฒ</a>
                        <a href="#" onclick="filterByCategory('Porsche', 'suspension')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุณุณุชู ุชุนูู</a>
                        <a href="#" onclick="filterByCategory('Porsche', 'engine')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ูุทุนุงุช ููุชูุฑ</a>
                        <a href="#" onclick="filterByCategory('Porsche', 'front_suspension')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุฌููุจูุฏ</a>
                        <a href="#" onclick="filterByCategory('Porsche', 'gearbox')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ฺฏุฑุจฺฉุณ</a>
                        <a href="#" onclick="filterByCategory('Porsche', 'electrical')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ุณุณุชู ุจุฑู</a>
                        <a href="#" onclick="filterByCategory('Porsche', 'body')" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">ููุงุฒู ุจุฏูู</a>
                    </div>
                </div>
                
                <a href="#" onclick="filterByBrand('all')" class="text-gray-600 hover:text-gray-900 whitespace-nowrap">ููู ูุญุตููุงุช</a>
                <a href="#" onclick="showCompareProducts()" class="text-gray-600 hover:text-gray-900 whitespace-nowrap hidden md:inline">ููุงุณู ูุญุตููุงุช</a>
                <a href="#" onclick="showPage('contact')" class="text-gray-600 hover:text-gray-900 whitespace-nowrap">ุชูุงุณ ุจุง ูุง</a>
                <a href="#" onclick="showPage('payment')" class="text-gray-600 hover:text-gray-900 whitespace-nowrap">ุดูู ูพุฑุฏุงุฎุช</a>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div id="mainContent">
        <!-- Home Page -->
        <div id="homePage" class="page-content active">
            <!-- Advanced Filters -->
            <div class="bg-gray-50 border-b border-gray-200">
                <div class="container mx-auto px-4 py-3">
                    <div class="flex flex-col md:flex-row items-start md:items-center space-y-2 md:space-y-0 md:space-x-4 md:space-x-reverse text-xs md:text-sm">
                        <span class="text-gray-600 hidden md:inline">ููุชุฑ:</span>
                        <div class="flex flex-wrap items-center gap-2 w-full">
                            <select id="priceFilter" onchange="applyFilters()" class="px-2 md:px-3 py-1 bg-white border border-gray-300 rounded-lg text-xs md:text-sm flex-1 md:flex-none">
                                <option value="all">ููู ููุชโูุง</option>
                                <option value="0-2000000">ุฒุฑ 2 ูููู</option>
                                <option value="2000000-5000000">2 ุชุง 5 ูููู</option>
                                <option value="5000000-10000000">5 ุชุง 10 ูููู</option>
                                <option value="10000000-999999999">ุจุงูุง 10 ูููู</option>
                            </select>
                            <select id="stockFilter" onchange="applyFilters()" class="px-2 md:px-3 py-1 bg-white border border-gray-300 rounded-lg text-xs md:text-sm flex-1 md:flex-none">
                                <option value="all">ููู ูุญุตููุงุช</option>
                                <option value="instock">ููุฌูุฏ</option>
                                <option value="outofstock">ูุงููุฌูุฏ</option>
                            </select>
                            <select id="sortFilter" onchange="applyFilters()" class="px-2 md:px-3 py-1 bg-white border border-gray-300 rounded-lg text-xs md:text-sm flex-1 md:flex-none">
                                <option value="newest">ุฌุฏุฏุชุฑู</option>
                                <option value="price-low">ุงุฑุฒุงูโุชุฑู</option>
                                <option value="price-high">ฺฏุฑุงูโุชุฑู</option>
                                <option value="rating">ุจูุชุฑู ุงูุชุงุฒ</option>
                                <option value="popular">ูุญุจูุจโุชุฑู</option>
                            </select>
                            <button onclick="clearFilters()" class="px-2 md:px-3 py-1 text-gray-600 hover:text-gray-900 text-xs md:text-sm whitespace-nowrap">ูพุงฺฉ ฺฉุฑุฏู</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hero Banner -->
            <section class="hero-section py-12 md:py-20">
                <div class="container mx-auto px-4 text-center">
                    <h1 class="text-3xl md:text-5xl font-light mb-4 md:mb-6 text-white">ููุงุฒู ุฏฺฉ ุขููุงู</h1>
                    <p class="text-lg md:text-xl mb-8 md:mb-10 text-white opacity-90">ฺฉูุช ุงุตูุ ููุช ููุงุณุจุ ฺฏุงุฑุงูุช ูุนุชุจุฑ</p>
                    <div class="flex flex-col md:flex-row items-center justify-center space-y-3 md:space-y-0 md:space-x-4 md:space-x-reverse">
                        <button onclick="scrollToProducts()" class="w-full md:w-auto apple-button text-white px-6 md:px-8 py-3 rounded-full font-medium">
                            ูุดุงูุฏู ูุญุตููุงุช
                        </button>
                        <button onclick="showCatalog()" class="w-full md:w-auto bg-white text-gray-900 px-6 md:px-8 py-3 rounded-full font-medium hover:bg-gray-100">
                            ุฏุงูููุฏ ฺฉุงุชุงููฺฏ
                        </button>
                    </div>
                </div>
            </section>

            <!-- Products Grid -->
            <section class="container mx-auto px-4 py-8 md:py-16" id="productsSection">
                <div class="text-center mb-8 md:mb-12">
                    <h2 class="text-2xl md:text-3xl font-light mb-4 text-gray-900">ูุญุตููุงุช</h2>
                    <p class="text-gray-600 text-sm md:text-base" id="productsCount">ููุงุด ููู ูุญุตููุงุช</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6" id="productsGrid">
                    <!-- Products will be populated by JavaScript -->
                </div>
                <div class="text-center mt-6 md:mt-8">
                    <button id="loadMoreBtn" onclick="loadMoreProducts()" class="apple-button text-white px-6 py-3 rounded-xl font-medium hidden">
                        ููุงุด ุจุดุชุฑ
                    </button>
                </div>
            </section>

            <!-- About Us Section -->
            <section class="bg-white py-12 md:py-20">
                <div class="container mx-auto px-4">
                    <div class="text-center mb-12 md:mb-16">
                        <h2 class="text-2xl md:text-3xl font-light mb-4 md:mb-6 text-gray-900">ุฏุฑุจุงุฑู ูุง</h2>
                        <p class="text-gray-600 text-base md:text-lg max-w-3xl mx-auto leading-relaxed">
                            B\S PARTS ุจุง ุจุด ุงุฒ 10 ุณุงู ุชุฌุฑุจู ุฏุฑ ุฒููู ูุงุฑุฏุงุช ู ูุฑูุด ููุงุฒู ุฏฺฉ ุงุตู ุฎูุฏุฑููุง ุขููุงูุ 
                            ุจู ุนููุงู ฺฉ ุงุฒ ูุนุชุจุฑุชุฑู ูุฑูุดฺฏุงูโูุง ุชุฎุตุต ุฏุฑ ุงู ุญูุฒู ุดูุงุฎุชู ูโุดูุฏ.
                        </p>
                    </div>
                    
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 md:gap-8">
                        <div class="text-center">
                            <div class="text-3xl md:text-4xl mb-3 md:mb-4">๐</div>
                            <h3 class="text-lg md:text-xl font-medium mb-2 md:mb-3 text-gray-900">ฺฉูุช ุงุตู</h3>
                            <p class="text-gray-600 text-sm md:text-base">ุชูุงู ูุญุตููุงุช ูุง ุงุตู ู ุจุง ฺฏุงุฑุงูุช ูุนุชุจุฑ ูุณุชูุฏ</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="text-3xl md:text-4xl mb-3 md:mb-4">๐</div>
                            <h3 class="text-lg md:text-xl font-medium mb-2 md:mb-3 text-gray-900">ุชุญูู ุณุฑุน</h3>
                            <p class="text-gray-600 text-sm md:text-base">ุงุฑุณุงู ุณุฑุน ุจู ุณุฑุงุณุฑ ฺฉุดูุฑ ุฏุฑ ฺฉูุชุฑู ุฒูุงู ููฺฉู</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="text-3xl md:text-4xl mb-3 md:mb-4">๐ฐ</div>
                            <h3 class="text-lg md:text-xl font-medium mb-2 md:mb-3 text-gray-900">ููุช ููุงุณุจ</h3>
                            <p class="text-gray-600 text-sm md:text-base">ุจูุชุฑู ููุชโูุง ุจุง ฺฉูุช ุจุงูุง ู ุฎุฏูุงุช ุนุงู</p>
                        </div>
                        
                        <div class="text-center">
                            <div class="text-3xl md:text-4xl mb-3 md:mb-4">๐ง</div>
                            <h3 class="text-lg md:text-xl font-medium mb-2 md:mb-3 text-gray-900">ูพุดุชุจุงู ูู</h3>
                            <p class="text-gray-600 text-sm md:text-base">ูุดุงูุฑู ุฑุงฺฏุงู ู ุฑุงูููุง ุชุฎุตุต</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Contact Page -->
        <div id="contactPage" class="page-content">
            <section class="container mx-auto px-4 py-16">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-12">
                        <h1 class="text-3xl md:text-4xl font-light mb-6 text-gray-900">ุชูุงุณ ุจุง ูุง</h1>
                        <p class="text-gray-600 text-lg">ูุง ููุดู ุขูุงุฏู ูพุงุณุฎฺฏู ุจู ุณูุงูุงุช ุดูุง ูุณุชู</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                        <!-- Contact Information -->
                        <div class="space-y-8">
                            <div class="bg-white rounded-2xl p-8 shadow-sm border">
                                <h3 class="text-xl font-semibold mb-6 text-gray-900">ุงุทูุงุนุงุช ุชูุงุณ</h3>
                                
                                <div class="space-y-6">
                                    <div class="flex items-center space-x-4 space-x-reverse">
                                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                                            <span class="text-xl">๐ฑ</span>
                                        </div>
                                        <div>
                                            <h4 class="font-medium text-gray-900">ููุจุงู</h4>
                                            <p class="text-gray-600 select-all">09124583607</p>
                                        </div>
                                    </div>

                                    <div class="flex items-center space-x-4 space-x-reverse">
                                        <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                                            <span class="text-xl">โ๏ธ</span>
                                        </div>
                                        <div>
                                            <h4 class="font-medium text-gray-900">ุชููู ุฏูุชุฑ</h4>
                                            <p class="text-gray-600 select-all">02136059698</p>
                                        </div>
                                    </div>

                                    <div class="flex items-center space-x-4 space-x-reverse">
                                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                                            <span class="text-xl">๐</span>
                                        </div>
                                        <div>
                                            <h4 class="font-medium text-gray-900">ุณุงุนุงุช ฺฉุงุฑ</h4>
                                            <p class="text-gray-600">8 ุตุจุญ ุชุง 9 ุดุจ</p>
                                            <p class="text-sm text-gray-500">ุดูุจู ุชุง ูพูุฌโุดูุจู</p>
                                        </div>
                                    </div>

                                    <div class="flex items-center space-x-4 space-x-reverse">
                                        <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
                                            <span class="text-xl">๐ง</span>
                                        </div>
                                        <div>
                                            <h4 class="font-medium text-gray-900">ุงูู</h4>
                                            <p class="text-gray-600 select-all">info@bsparts.ir</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-8">
                                <h3 class="text-xl font-semibold mb-4 text-gray-900">ูพุดุชุจุงู ุณุฑุน</h3>
                                <p class="text-gray-600 mb-6">ุจุฑุง ุฏุฑุงูุช ูุดุงูุฑู ููุฑ ู ูพุงุณุฎ ุณุฑุนุ ุจุง ูุง ุชูุงุณ ุจฺฏุฑุฏ</p>
                                <div class="flex space-x-4 space-x-reverse">
                                    <a href="tel:09124583607" class="flex-1 bg-blue-600 text-white text-center py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors">
                                        ุชูุงุณ ููุฑ
                                    </a>
                                    <a href="sms:09124583607" class="flex-1 bg-green-600 text-white text-center py-3 rounded-xl font-medium hover:bg-green-700 transition-colors">
                                        ุงุฑุณุงู ูพุงูฺฉ
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Contact Form -->
                        <div class="bg-white rounded-2xl p-8 shadow-sm border">
                            <h3 class="text-xl font-semibold mb-6 text-gray-900">ุงุฑุณุงู ูพุงู</h3>
                            
                            <form class="space-y-6" onsubmit="sendContactMessage(event)">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</label>
                                    <input type="text" required class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ุดูุงุฑู ุชูุงุณ</label>
                                    <input type="tel" required class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ููุถูุน</label>
                                    <select class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                        <option>ุงุณุชุนูุงู ููุช</option>
                                        <option>ูพฺฏุฑ ุณูุงุฑุด</option>
                                        <option>ุดฺฉุงุช</option>
                                        <option>ูพุดููุงุฏ</option>
                                        <option>ุณุงุฑ</option>
                                    </select>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">ูพุงู ุดูุง</label>
                                    <textarea rows="5" required class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"></textarea>
                                </div>

                                <button type="submit" class="w-full bg-blue-600 text-white py-3 rounded-xl font-medium hover:bg-blue-700 transition-colors">
                                    ุงุฑุณุงู ูพุงู
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Payment Page -->
        <div id="paymentPage" class="page-content">
            <section class="container mx-auto px-4 py-16">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center mb-12">
                        <h1 class="text-3xl md:text-4xl font-light mb-6 text-gray-900">ุดููโูุง ูพุฑุฏุงุฎุช</h1>
                        <p class="text-gray-600 text-lg">ุฑูุดโูุง ูุฎุชูู ูพุฑุฏุงุฎุช ุจุฑุง ุฑุงุญุช ุดูุง</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Online Payment -->
                        <div class="bg-white rounded-2xl p-8 shadow-sm border">
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl">๐ณ</span>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-900">ูพุฑุฏุงุฎุช ุขููุงู</h3>
                            </div>

                            <div class="space-y-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <span class="text-green-500">โ</span>
                                    <span class="text-gray-700">ูพุฑุฏุงุฎุช ุงูู ุจุง ุฏุฑฺฏุงู ุฒุฑูโูพุงู</span>
                                </div>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <span class="text-green-500">โ</span>
                                    <span class="text-gray-700">ูพุดุชุจุงู ุงุฒ ุชูุงู ฺฉุงุฑุชโูุง ุจุงูฺฉ</span>
                                </div>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <span class="text-green-500">โ</span>
                                    <span class="text-gray-700">ุชุงุฏ ููุฑ ุณูุงุฑุด</span>
                                </div>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <span class="text-green-500">โ</span>
                                    <span class="text-gray-700">ุงูฺฉุงู ูพุฑุฏุงุฎุช ุงูุณุงุท</span>
                                </div>
                            </div>

                            <div class="mt-6 p-4 bg-blue-50 rounded-xl">
                                <h4 class="font-medium text-blue-900 mb-2">ูุฒุงุง ูพุฑุฏุงุฎุช ุขููุงู:</h4>
                                <ul class="text-sm text-blue-700 space-y-1">
                                    <li>โข ูพุฑุฏุงุฒุด ููุฑ ุณูุงุฑุด</li>
                                    <li>โข 5% ุชุฎูู ูฺู</li>
                                    <li>โข ุงุฑุณุงู ุณุฑุนโุชุฑ</li>
                                </ul>
                            </div>
                        </div>

                        <!-- In-Person Payment -->
                        <div class="bg-white rounded-2xl p-8 shadow-sm border">
                            <div class="text-center mb-6">
                                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <span class="text-2xl">๐ช</span>
                                </div>
                                <h3 class="text-xl font-semibold text-gray-900">ูพุฑุฏุงุฎุช ุญุถูุฑ</h3>
                            </div>

                            <div class="space-y-4">
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <span class="text-green-500">โ</span>
                                    <span class="text-gray-700">ูพุฑุฏุงุฎุช ููุฏ ุฏุฑ ูุญู</span>
                                </div>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <span class="text-green-500">โ</span>
                                    <span class="text-gray-700">ูพุฑุฏุงุฎุช ุจุง ฺฉุงุฑุช ุฏุฑ ูุญู</span>
                                </div>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <span class="text-green-500">โ</span>
                                    <span class="text-gray-700">ุจุงุฒุฏุฏ ู ุฎุฑุฏ ุญุถูุฑ</span>
                                </div>
                                <div class="flex items-center space-x-3 space-x-reverse">
                                    <span class="text-green-500">โ</span>
                                    <span class="text-gray-700">ูุดุงูุฑู ุฑุงฺฏุงู</span>
                                </div>
                            </div>

                            <div class="mt-6 p-4 bg-green-50 rounded-xl">
                                <h4 class="font-medium text-green-900 mb-2">ุณุงุนุงุช ฺฉุงุฑ:</h4>
                                <div class="text-sm text-green-700 space-y-1">
                                    <div class="flex justify-between">
                                        <span>ุดูุจู ุชุง ูพูุฌโุดูุจู:</span>
                                        <span class="font-medium">8 ุตุจุญ ุชุง 9 ุดุจ</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>ุฌูุนู:</span>
                                        <span class="font-medium">ุชุนุทู</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Information -->
                    <div class="mt-12 bg-gray-50 rounded-2xl p-8">
                        <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">ุงุทูุงุนุงุช ููู</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="text-center">
                                <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <span class="text-xl">๐</span>
                                </div>
                                <h4 class="font-medium text-gray-900 mb-2">ุงุฑุณุงู ุฑุงฺฏุงู</h4>
                                <p class="text-sm text-gray-600">ุจุฑุง ุฎุฑุฏูุง ุจุงูุง 5 ูููู ุชููุงู</p>
                            </div>

                            <div class="text-center">
                                <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <span class="text-xl">๐</span>
                                </div>
                                <h4 class="font-medium text-gray-900 mb-2">ูพุฑุฏุงุฎุช ุงูู</h4>
                                <p class="text-sm text-gray-600">ุชูุงู ุชุฑุงฺฉูุดโูุง ฺฉุงููุงู ุงูู ู ุฑูุฒูฺฏุงุฑ ุดุฏู</p>
                            </div>

                            <div class="text-center">
                                <div class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <span class="text-xl">๐</span>
                                </div>
                                <h4 class="font-medium text-gray-900 mb-2">ูพุดุชุจุงู 24/7</h4>
                                <p class="text-sm text-gray-600">ุขูุงุฏู ูพุงุณุฎฺฏู ุฏุฑ ุชูุงู ุณุงุนุงุช</p>
                            </div>
                        </div>

                        <div class="mt-8 text-center">
                            <p class="text-gray-600 mb-4">ุณูุงู ุฏุงุฑุฏุ ุจุง ูุง ุชูุงุณ ุจฺฏุฑุฏ:</p>
                            <div class="flex justify-center space-x-4 space-x-reverse">
                                <a href="tel:09124583607" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                    ๐ฑ 09124583607
                                </a>
                                <a href="tel:02136059698" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">
                                    โ๏ธ 02136059698
                                </a>
                            </div>
                            
                            <div class="mt-6 text-center">
                                <p class="text-gray-600 mb-4">ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช ุขููุงู:</p>
                                <a href="https://zarinp.al/bsparts" target="_blank" class="inline-flex items-center space-x-2 space-x-reverse bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors">
                                    <span>๐ณ</span>
                                    <span>ุฒุฑูโูพุงู B\S PARTS</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-semibold mb-4">B\S PARTS</h3>
                    <p class="text-gray-400">ูุฑูุดฺฏุงู ุชุฎุตุต ููุงุฒู ุฏฺฉ ุฎูุฏุฑููุง ุขููุงู</p>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">ุฏุณุชุฑุณ ุณุฑุน</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" onclick="showPage('home')" class="hover:text-white">ุตูุญู ุงุตู</a></li>
                        <li><a href="#" onclick="showPage('contact')" class="hover:text-white">ุชูุงุณ ุจุง ูุง</a></li>
                        <li><a href="#" onclick="showPage('payment')" class="hover:text-white">ุดูู ูพุฑุฏุงุฎุช</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">ุฎุฏูุงุช ูุดุชุฑุงู</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white">ุฑุงูููุง ุฎุฑุฏ</a></li>
                        <li><a href="#" class="hover:text-white">ุถูุงูุช ู ฺฏุงุฑุงูุช</a></li>
                        <li><a href="#" class="hover:text-white">ูพฺฏุฑ ุณูุงุฑุด</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">ุชูุงุณ ุจุง ูุง</h4>
                    <div class="space-y-2 text-gray-400">
                        <p>๐ฑ 09124583607</p>
                        <p>โ๏ธ 02136059698</p>
                        <p>๐ง info@bsparts.ir</p>
                    </div>
                    <div class="mt-4">
                        <a referrerpolicy='origin' target='_blank' href='https://trustseal.enamad.ir/?id=486393&Code=fJk7Cg7j9TWo7rysxZLs70DNiMtrU0Le'>
                            <img referrerpolicy='origin' src='https://trustseal.enamad.ir/logo.aspx?id=486393&Code=fJk7Cg7j9TWo7rysxZLs70DNiMtrU0Le' alt='ุงููุงุฏ' style='cursor:pointer' code='fJk7Cg7j9TWo7rysxZLs70DNiMtrU0Le'>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 1403 B\S PARTS. ุชูุงู ุญููู ูุญููุธ ุงุณุช.</p>
            </div>
        </div>
    </footer>

    <!-- User Login/Register Modal -->
    <div id="userModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl p-6 md:p-8 max-w-md w-full">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg md:text-xl font-semibold" id="userModalTitle">ูุฑูุฏ ุจู ุญุณุงุจ ฺฉุงุฑุจุฑ</h3>
                <button onclick="closeUserModal()" class="text-gray-500 hover:text-gray-700 text-xl">โ</button>
            </div>
            
            <!-- Login Form -->
            <div id="loginForm">
                <div class="space-y-4">
                    <input type="tel" id="loginPhone" placeholder="ุดูุงุฑู ููุจุงู" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm">
                    <input type="password" id="loginPassword" placeholder="ุฑูุฒ ุนุจูุฑ" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm">
                </div>
                
                <div class="flex space-x-4 space-x-reverse mt-6">
                    <button onclick="showRegisterForm()" class="flex-1 px-4 py-3 text-gray-600 rounded-xl hover:bg-gray-100">
                        ุซุจุช ูุงู
                    </button>
                    <button onclick="loginUser()" class="flex-1 px-4 py-3 apple-button text-white rounded-xl">
                        ูุฑูุฏ
                    </button>
                </div>
            </div>
            
            <!-- Register Form -->
            <div id="registerForm" class="hidden">
                <div class="space-y-4">
                    <input type="text" id="registerName" placeholder="ูุงู ู ูุงู ุฎุงููุงุฏฺฏ" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm">
                    <input type="tel" id="registerPhone" placeholder="ุดูุงุฑู ููุจุงู" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm">
                    <input type="password" id="registerPassword" placeholder="ุฑูุฒ ุนุจูุฑ" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm">
                    <input type="password" id="registerConfirmPassword" placeholder="ุชฺฉุฑุงุฑ ุฑูุฒ ุนุจูุฑ" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm">
                </div>
                
                <div class="flex space-x-4 space-x-reverse mt-6">
                    <button onclick="showLoginForm()" class="flex-1 px-4 py-3 text-gray-600 rounded-xl hover:bg-gray-100">
                        ูุฑูุฏ
                    </button>
                    <button onclick="registerUser()" class="flex-1 px-4 py-3 apple-button text-white rounded-xl">
                        ุซุจุช ูุงู
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Panel Modal -->
    <div id="userPanelModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold">ูพูู ฺฉุงุฑุจุฑ</h3>
                <button onclick="closeUserPanel()" class="text-gray-500 hover:text-gray-700">โ</button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <button onclick="showUserOrders()" class="p-4 bg-blue-50 rounded-xl text-center hover:bg-blue-100">
                    <div class="text-2xl mb-2">๐ฆ</div>
                    <div class="font-medium">ุณูุงุฑุดุงุช ูู</div>
                </button>
                <button onclick="showUserProfile()" class="p-4 bg-green-50 rounded-xl text-center hover:bg-green-100">
                    <div class="text-2xl mb-2">๐ค</div>
                    <div class="font-medium">ูพุฑููุงู</div>
                </button>
                <button onclick="showUserAddresses()" class="p-4 bg-purple-50 rounded-xl text-center hover:bg-purple-100">
                    <div class="text-2xl mb-2">๐</div>
                    <div class="font-medium">ุขุฏุฑุณโูุง</div>
                </button>
            </div>
            
            <div id="userPanelContent">
                <!-- Content will be loaded here -->
            </div>
            
            <div class="mt-6 text-center">
                <button onclick="logoutUser()" class="px-6 py-2 text-red-600 hover:bg-red-50 rounded-xl">
                    ุฎุฑูุฌ ุงุฒ ุญุณุงุจ
                </button>
            </div>
        </div>
    </div>

    <!-- Product Detail Modal -->
    <div id="productDetailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl p-4 md:p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-4 md:mb-6">
                <h3 class="text-lg md:text-xl font-semibold" id="productDetailTitle">ุฌุฒุฆุงุช ูุญุตูู</h3>
                <button onclick="closeProductDetail()" class="text-gray-500 hover:text-gray-700 text-xl">โ</button>
            </div>
            
            <div id="productDetailContent">
                <!-- Product details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Wishlist Modal -->
    <div id="wishlistModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold">ูุณุช ุนูุงููโููุฏโูุง</h3>
                <button onclick="closeWishlist()" class="text-gray-500 hover:text-gray-700">โ</button>
            </div>
            
            <div id="wishlistContent">
                <!-- Wishlist items will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Compare Products Modal -->
    <div id="compareModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-semibold">ููุงุณู ูุญุตููุงุช</h3>
                <button onclick="closeCompareProducts()" class="text-gray-500 hover:text-gray-700">โ</button>
            </div>
            
            <div id="compareContent">
                <!-- Compare content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4">
            <h3 class="text-xl font-semibold mb-6 text-center">ูุฑูุฏ ูุฏุฑ</h3>
            
            <div class="space-y-4">
                <div>
                    <input type="password" id="adminPassword" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm" placeholder="ุฑูุฒ ุนุจูุฑ" onkeypress="if(event.key==='Enter') checkAdminPassword()">
                </div>
            </div>
            
            <div class="flex space-x-4 space-x-reverse mt-6">
                <button onclick="closeAdminLogin()" class="flex-1 px-4 py-3 text-gray-600 rounded-xl hover:bg-gray-100">
                    ุงูุตุฑุงู
                </button>
                <button onclick="checkAdminPassword()" class="flex-1 px-4 py-3 apple-button text-white rounded-xl" id="adminLoginBtn">
                    ูุฑูุฏ
                </button>
            </div>
            
            <div class="mt-4 text-center text-sm text-gray-500">
                ุฑูุฒ ุนุจูุฑ ูพุดโูุฑุถ: <code class="bg-gray-100 px-2 py-1 rounded">admin123</code>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="fixed inset-0 bg-white z-50 hidden overflow-y-auto">
        <div class="bg-gray-900 text-white p-4">
            <div class="flex items-center justify-between">
                <h2 class="text-xl font-semibold">ูพูู ูุฏุฑุช</h2>
                <button onclick="closeAdminPanel()" class="px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600">
                    ุจุณุชู
                </button>
            </div>
        </div>

        <div class="container mx-auto px-4 py-8">
            <!-- Admin Navigation -->
            <div class="flex space-x-4 space-x-reverse mb-8">
                <button onclick="showAdminProducts()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" id="adminProductsBtn">
                    ูุฏุฑุช ูุญุตููุงุช
                </button>
                <button onclick="showAdminOrders()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700" id="adminOrdersBtn">
                    ูุฏุฑุช ุณูุงุฑุดุงุช
                </button>
                <button onclick="showAdminUsers()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700" id="adminUsersBtn">
                    ูุฏุฑุช ฺฉุงุฑุจุฑุงู
                </button>
                <button onclick="showAdminReports()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700" id="adminReportsBtn">
                    ฺฏุฒุงุฑุดุงุช
                </button>
                <button onclick="showAdminSMS()" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700" id="adminSMSBtn">
                    ุชูุธูุงุช ุชูฺฏุฑุงู
                </button>
            </div>

            <div id="adminContent">
                <!-- Admin content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Shopping Cart Sidebar -->
    <div id="cartSidebar" class="fixed right-0 top-0 h-full w-full sm:w-80 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50">
        <div class="p-4 md:p-6 border-b">
            <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold">ุณุจุฏ ุฎุฑุฏ</h3>
                <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700 text-xl">โ</button>
            </div>
        </div>
        
        <div id="cartItems" class="flex-1 overflow-y-auto p-4 md:p-6" style="height: calc(100vh - 200px);">
            <div class="text-center text-gray-500 py-8">
                ุณุจุฏ ุฎุฑุฏ ุดูุง ุฎุงู ุงุณุช
            </div>
        </div>
        
        <div class="border-t p-4 md:p-6 bg-white">
            <div class="space-y-2 mb-4">
                <div class="flex justify-between text-sm">
                    <span>ุฌูุน ฺฉู:</span>
                    <span id="cartSubtotal">0 ุชููุงู</span>
                </div>
                <div class="flex justify-between text-sm">
                    <span>ูุฒูู ุงุฑุณุงู:</span>
                    <span id="cartShipping">ุฑุงฺฏุงู</span>
                </div>
                <div class="flex justify-between items-center font-semibold text-base md:text-lg border-t pt-2">
                    <span>ูุฌููุน:</span>
                    <span id="cartTotal">0 ุชููุงู</span>
                </div>
            </div>
            <button onclick="proceedToCheckout()" class="w-full apple-button text-white py-3 rounded-xl font-medium">
                ูพุฑุฏุงุฎุช
            </button>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl p-4 md:p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <h3 class="text-lg md:text-xl font-semibold mb-4 md:mb-6 text-center">ุชฺฉูู ุณูุงุฑุด</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                <!-- Customer Info -->
                <div>
                    <h4 class="font-semibold mb-4">ุงุทูุงุนุงุช ูุดุชุฑ</h4>
                    <div class="space-y-4">
                        <input type="text" id="checkoutName" placeholder="ูุงู ู ูุงู ุฎุงููุงุฏฺฏ" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm">
                        <input type="tel" id="checkoutPhone" placeholder="ุดูุงุฑู ุชููู" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm">
                        <textarea id="checkoutAddress" placeholder="ุขุฏุฑุณ ฺฉุงูู" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm" rows="3"></textarea>
                        <textarea id="checkoutNotes" placeholder="ุชูุถุญุงุช (ุงุฎุชุงุฑ)" class="w-full px-4 py-3 bg-gray-100 border-0 rounded-xl focus:outline-none focus:bg-white focus:shadow-sm" rows="2"></textarea>
                    </div>
                </div>
                
                <!-- Order Summary -->
                <div>
                    <h4 class="font-semibold mb-4">ุฎูุงุตู ุณูุงุฑุด</h4>
                    <div id="checkoutSummary" class="space-y-2 mb-4">
                        <!-- Order items will be shown here -->
                    </div>
                    <div class="border-t pt-4">
                        <div class="flex justify-between font-semibold text-lg">
                            <span>ูุฌููุน:</span>
                            <span id="checkoutTotal">0 ุชููุงู</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flex space-x-4 space-x-reverse mt-6">
                <button onclick="closeCheckout()" class="flex-1 px-4 py-3 text-gray-600 rounded-xl hover:bg-gray-100">
                    ุงูุตุฑุงู
                </button>
                <button onclick="processPayment()" class="flex-1 px-4 py-3 apple-button text-white rounded-xl">
                    ูพุฑุฏุงุฎุช
                </button>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 hidden z-40" onclick="toggleCart()"></div>

    <!-- Notification Toast -->
    <div id="notificationToast" class="fixed top-4 right-4 bg-black text-white px-4 py-2 rounded-xl shadow-lg z-50 transform translate-x-full transition-transform duration-300">
        <span id="notificationMessage"></span>
    </div>

    <script>
        // Enhanced products data with more details
        let products = [
            {
                id: 1,
                name: "ููุช ุนูุจ BMW 528 - Textar",
                price: 6000000,
                originalPrice: 7000000,
                image: "๐",
                brand: "BMW",
                category: "brake",
                description: "ููุช ุชุฑูุฒ ุนูุจ ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 15,
                rating: 4.8,
                reviews: 24,
                specifications: {
                    "ุจุฑูุฏ": "Textar",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ฺฉุฏ ูู": "2355401"
                },
                tags: ["ููุช", "ุชุฑูุฒ", "ุนูุจ", "BMW", "528"],
                isPopular: true,
                discount: 14
            },
            {
                id: 2,
                name: "ููุช ุฌูู BMW 528 - Textar",
                price: 6000000,
                originalPrice: 6000000,
                image: "๐",
                brand: "BMW",
                category: "brake",
                description: "ููุช ุชุฑูุฒ ุฌูู ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 8,
                rating: 4.9,
                reviews: 31,
                specifications: {
                    "ุจุฑูุฏ": "Textar",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ฺฉุฏ ูู": "2355402"
                },
                tags: ["ููุช", "ุชุฑูุฒ", "ุฌูู", "BMW", "528"],
                isPopular: true,
                discount: 0
            },
            {
                id: 3,
                name: "ุฏุณฺฉ ุชุฑูุฒ ุฌูู BMW X4 - Brembo",
                price: 8500000,
                originalPrice: 9500000,
                image: "โ๏ธ",
                brand: "BMW",
                category: "brake",
                description: "ุฏุณฺฉ ุชุฑูุฒ ุฌูู ุงุตู ุงุชุงูุง ุจุฑุง BMW X4",
                stock: 5,
                rating: 4.7,
                reviews: 18,
                specifications: {
                    "ุจุฑูุฏ": "Brembo",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุงุชุงูุง",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ูุทุฑ": "370mm"
                },
                tags: ["ุฏุณฺฉ", "ุชุฑูุฒ", "ุฌูู", "BMW", "X4"],
                isPopular: false,
                discount: 11
            },
            {
                id: 4,
                name: "ฺฉูฺฉ ููุฑ ุฌูู Mercedes C-Class - Bilstein",
                price: 12000000,
                originalPrice: 12000000,
                image: "๐ง",
                brand: "Mercedes",
                category: "suspension",
                description: "ฺฉูฺฉ ููุฑ ุฌูู ุงุตู ุขููุงู ุจุฑุง ูุฑุณุฏุณ ฺฉูุงุณ C",
                stock: 0,
                rating: 4.6,
                reviews: 12,
                specifications: {
                    "ุจุฑูุฏ": "Bilstein",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ููุน": "ฺฏุงุฒ"
                },
                tags: ["ฺฉูฺฉ ููุฑ", "ุชุนูู", "ุฌูู", "Mercedes", "C-Class"],
                isPopular: false,
                discount: 0
            },
            {
                id: 5,
                name: "ููุชุฑ ุฑูุบู Porsche 911 - Mann",
                price: 850000,
                originalPrice: 1000000,
                image: "๐ฉ",
                brand: "Porsche",
                category: "engine",
                description: "ููุชุฑ ุฑูุบู ุงุตู ุขููุงู ุจุฑุง ูพูุฑุดู 911",
                stock: 25,
                rating: 4.9,
                reviews: 45,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "6 ูุงู",
                    "ฺฉุฏ ูู": "W719/45"
                },
                tags: ["ููุชุฑ", "ุฑูุบู", "ููุชูุฑ", "Porsche", "911"],
                isPopular: true,
                discount: 15
            },
            {
                id: 6,
                name: "ุณูุณูุฑ ABS BMW F30 - Bosch",
                price: 3200000,
                originalPrice: 3200000,
                image: "๐ก",
                brand: "BMW",
                category: "electrical",
                description: "ุณูุณูุฑ ABS ุงุตู ุขููุงู ุจุฑุง BMW F30",
                stock: 12,
                rating: 4.5,
                reviews: 8,
                specifications: {
                    "ุจุฑูุฏ": "Bosch",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ููุชุงฺ": "12V"
                },
                tags: ["ุณูุณูุฑ", "ABS", "ุจุฑู", "BMW", "F30"],
                isPopular: false,
                discount: 0
            },
            {
                id: 7,
                name: "ููุชุฑ ุฑูุบู BMW N20 - Mann",
                price: 550000,
                originalPrice: 550000,
                image: "๐ฉ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ุฑูุบู ุงุตู ุขููุงู ุจุฑุง BMW N20",
                stock: 20,
                rating: 4.8,
                reviews: 15,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "6 ูุงู",
                    "ฺฉุฏ ูู": "W719/30"
                },
                tags: ["ููุชุฑ", "ุฑูุบู", "ููุชูุฑ", "BMW", "N20"],
                isPopular: true,
                discount: 0
            },
            {
                id: 8,
                name: "ููุชุฑ ููุง BMW 528 - Mann",
                price: 700000,
                originalPrice: 700000,
                image: "๐ฌ๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ููุง ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 15,
                rating: 4.7,
                reviews: 12,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ฺฉุฏ ูู": "C32154"
                },
                tags: ["ููุชุฑ", "ููุง", "ููุชูุฑ", "BMW", "528"],
                isPopular: false,
                discount: 0
            },
            {
                id: 9,
                name: "ููุชุฑ ููุง BMW X4 - Mann",
                price: 850000,
                originalPrice: 850000,
                image: "๐ฌ๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ููุง ุงุตู ุขููุงู ุจุฑุง BMW X4",
                stock: 10,
                rating: 4.6,
                reviews: 8,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ฺฉุฏ ูู": "C33156"
                },
                tags: ["ููุชุฑ", "ููุง", "ููุชูุฑ", "BMW", "X4"],
                isPopular: false,
                discount: 0
            },
            {
                id: 10,
                name: "ุชุฑููุณุชุงุช BMW N20 - Wahler",
                price: 5000000,
                originalPrice: 5000000,
                image: "๐ก๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ุชุฑููุณุชุงุช ุงุตู ุขููุงู ุจุฑุง BMW N20",
                stock: 5,
                rating: 4.9,
                reviews: 6,
                specifications: {
                    "ุจุฑูุฏ": "Wahler",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฏูุง ุจุงุฒ ุดุฏู": "83ยฐC"
                },
                tags: ["ุชุฑููุณุชุงุช", "ููุชูุฑ", "BMW", "N20"],
                isPopular: false,
                discount: 0
            },
            {
                id: 11,
                name: "ฺฉูู BMW - Bosch",
                price: 2500000,
                originalPrice: 2500000,
                image: "โก",
                brand: "BMW",
                category: "electrical",
                description: "ฺฉูู ุฌุฑูู ุงุตู ุขููุงู ุจุฑุง BMW",
                stock: 8,
                rating: 4.8,
                reviews: 10,
                specifications: {
                    "ุจุฑูุฏ": "Bosch",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ููุชุงฺ": "12V"
                },
                tags: ["ฺฉูู", "ุฌุฑูู", "ุจุฑู", "BMW"],
                isPopular: true,
                discount: 0
            },
            {
                id: 12,
                name: "ุดูุน ููุชูุฑ BMW N20 - NGK",
                price: 1500000,
                originalPrice: 1500000,
                image: "๐ฅ",
                brand: "BMW",
                category: "engine",
                description: "ุดูุน ููุชูุฑ ุงุตู ฺุงูพู ุจุฑุง BMW N20",
                stock: 12,
                rating: 4.7,
                reviews: 14,
                specifications: {
                    "ุจุฑูุฏ": "NGK",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ฺุงูพู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ููุน": "Iridium"
                },
                tags: ["ุดูุน", "ููุชูุฑ", "BMW", "N20"],
                isPopular: false,
                discount: 0
            },
            {
                id: 13,
                name: "ุฑุงุฏุงุชูุฑ ุขุจ BMW 528 - Behr",
                price: 14000000,
                originalPrice: 14000000,
                image: "๐",
                brand: "BMW",
                category: "engine",
                description: "ุฑุงุฏุงุชูุฑ ุขุจ ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 3,
                rating: 4.9,
                reviews: 5,
                specifications: {
                    "ุจุฑูุฏ": "Behr",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ุฌูุณ": "ุขูููููู"
                },
                tags: ["ุฑุงุฏุงุชูุฑ", "ุขุจ", "ููุชูุฑ", "BMW", "528"],
                isPopular: false,
                discount: 0
            },
            {
                id: 14,
                name: "ุฑุงุฏุงุชูุฑ ุขุจ BMW X3 E83 - Behr",
                price: 9000000,
                originalPrice: 9000000,
                image: "๐",
                brand: "BMW",
                category: "engine",
                description: "ุฑุงุฏุงุชูุฑ ุขุจ ุงุตู ุขููุงู ุจุฑุง BMW X3 E83",
                stock: 4,
                rating: 4.8,
                reviews: 7,
                specifications: {
                    "ุจุฑูุฏ": "Behr",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ุฌูุณ": "ุขูููููู"
                },
                tags: ["ุฑุงุฏุงุชูุฑ", "ุขุจ", "ููุชูุฑ", "BMW", "X3", "E83"],
                isPopular: false,
                discount: 0
            },
            {
                id: 15,
                name: "ููุชุฑ ุฑูุบู ููุชูุฑ BMW B48 (G12 ู G30) - Mann",
                price: 900000,
                originalPrice: 900000,
                image: "๐ฉ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ุฑูุบู ุงุตู ุขููุงู ุจุฑุง BMW B48 (G12 ู G30)",
                stock: 18,
                rating: 4.7,
                reviews: 12,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "6 ูุงู",
                    "ฺฉุฏ ูู": "W719/45"
                },
                tags: ["ููุชุฑ", "ุฑูุบู", "ููุชูุฑ", "BMW", "B48", "G12", "G30"],
                isPopular: true,
                discount: 0
            },
            {
                id: 16,
                name: "ููุชุฑ ููุง BMW G12 - Mann",
                price: 500000,
                originalPrice: 500000,
                image: "๐ฌ๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ููุง ุงุตู ุขููุงู ุจุฑุง BMW G12",
                stock: 12,
                rating: 4.6,
                reviews: 9,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ฺฉุฏ ูู": "C32140"
                },
                tags: ["ููุชุฑ", "ููุง", "ููุชูุฑ", "BMW", "G12"],
                isPopular: false,
                discount: 0
            },
            {
                id: 17,
                name: "ููุชุฑ ุฑูุบู BMW X1 - Mann",
                price: 700000,
                originalPrice: 700000,
                image: "๐ฉ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ุฑูุบู ุงุตู ุขููุงู ุจุฑุง BMW X1",
                stock: 14,
                rating: 4.8,
                reviews: 11,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "6 ูุงู",
                    "ฺฉุฏ ูู": "W719/30"
                },
                tags: ["ููุชุฑ", "ุฑูุบู", "ููุชูุฑ", "BMW", "X1"],
                isPopular: false,
                discount: 0
            },
            {
                id: 18,
                name: "ููุชุฑ ููุง BMW X1 - Mann",
                price: 900000,
                originalPrice: 900000,
                image: "๐ฌ๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ููุง ุงุตู ุขููุงู ุจุฑุง BMW X1",
                stock: 10,
                rating: 4.7,
                reviews: 8,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ฺฉุฏ ูู": "C33158"
                },
                tags: ["ููุชุฑ", "ููุง", "ููุชูุฑ", "BMW", "X1"],
                isPopular: false,
                discount: 0
            },
            {
                id: 19,
                name: "ููุชุฑ ุฑูุบู BMW E60 (N52) - Mann",
                price: 500000,
                originalPrice: 500000,
                image: "๐ฉ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ุฑูุบู ุงุตู ุขููุงู ุจุฑุง BMW E60 (N52)",
                stock: 16,
                rating: 4.9,
                reviews: 13,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "6 ูุงู",
                    "ฺฉุฏ ูู": "W719/14"
                },
                tags: ["ููุชุฑ", "ุฑูุบู", "ููุชูุฑ", "BMW", "E60", "N52"],
                isPopular: true,
                discount: 0
            },
            {
                id: 20,
                name: "ููุชุฑ ููุง BMW E60 (M54) - Mann",
                price: 600000,
                originalPrice: 600000,
                image: "๐ฌ๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ููุชุฑ ููุง ุงุตู ุขููุงู ุจุฑุง BMW E60 (M54)",
                stock: 11,
                rating: 4.6,
                reviews: 7,
                specifications: {
                    "ุจุฑูุฏ": "Mann",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ฺฉุฏ ูู": "C32114"
                },
                tags: ["ููุชุฑ", "ููุง", "ููุชูุฑ", "BMW", "E60", "M54"],
                isPopular: false,
                discount: 0
            },
            {
                id: 21,
                name: "ุชุฑููุณุชุงุช BMW ููุชูุฑ M54 - Wahler",
                price: 4500000,
                originalPrice: 4500000,
                image: "๐ก๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ุชุฑููุณุชุงุช ุงุตู ุขููุงู ุจุฑุง BMW ููุชูุฑ M54",
                stock: 6,
                rating: 4.8,
                reviews: 9,
                specifications: {
                    "ุจุฑูุฏ": "Wahler",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฏูุง ุจุงุฒ ุดุฏู": "83ยฐC"
                },
                tags: ["ุชุฑููุณุชุงุช", "ููุชูุฑ", "BMW", "M54"],
                isPopular: false,
                discount: 0
            },
            {
                id: 22,
                name: "ุฑูุบู ููุชูุฑ BMW - Castrol",
                price: 1200000,
                originalPrice: 1200000,
                image: "๐ข๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ุฑูุบู ููุชูุฑ ุงุตู ุจุฑุง BMW",
                stock: 20,
                rating: 4.9,
                reviews: 25,
                specifications: {
                    "ุจุฑูุฏ": "Castrol",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ุญุฌู": "5 ูุชุฑ"
                },
                tags: ["ุฑูุบู", "ููุชูุฑ", "BMW"],
                isPopular: true,
                discount: 0
            },
            {
                id: 23,
                name: "ูู ููุฌฺฏุฑ BMW 528 - Lemforder",
                price: 2300000,
                originalPrice: 2300000,
                image: "๐",
                brand: "BMW",
                category: "front_suspension",
                description: "ูู ููุฌฺฏุฑ ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 8,
                rating: 4.7,
                reviews: 6,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฌูุณ": "ูููุงุฏ"
                },
                tags: ["ูู ููุฌฺฏุฑ", "ุฌููุจูุฏ", "BMW", "528"],
                isPopular: false,
                discount: 0
            },
            {
                id: 24,
                name: "ูู ููุฌฺฏุฑ BMW E90 - Lemforder",
                price: 1500000,
                originalPrice: 1500000,
                image: "๐",
                brand: "BMW",
                category: "front_suspension",
                description: "ูู ููุฌฺฏุฑ ุงุตู ุขููุงู ุจุฑุง BMW E90",
                stock: 10,
                rating: 4.8,
                reviews: 8,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฌูุณ": "ูููุงุฏ"
                },
                tags: ["ูู ููุฌฺฏุฑ", "ุฌููุจูุฏ", "BMW", "E90"],
                isPopular: true,
                discount: 0
            },
            {
                id: 25,
                name: "ูู ููุฌฺฏุฑ BMW X4 - Lemforder",
                price: 2900000,
                originalPrice: 2900000,
                image: "๐",
                brand: "BMW",
                category: "front_suspension",
                description: "ูู ููุฌฺฏุฑ ุงุตู ุขููุงู ุจุฑุง BMW X4",
                stock: 5,
                rating: 4.6,
                reviews: 4,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฌูุณ": "ูููุงุฏ"
                },
                tags: ["ูู ููุฌฺฏุฑ", "ุฌููุจูุฏ", "BMW", "X4"],
                isPopular: false,
                discount: 0
            },
            {
                id: 26,
                name: "ุชููพ ุณุฑ ฺฉูฺฉ BMW E60 - Lemforder",
                price: 350000,
                originalPrice: 350000,
                image: "โช",
                brand: "BMW",
                category: "front_suspension",
                description: "ุชููพ ุณุฑ ฺฉูฺฉ ุงุตู ุขููุงู ุจุฑุง BMW E60",
                stock: 15,
                rating: 4.5,
                reviews: 7,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุชููพ", "ุณุฑ ฺฉูฺฉ", "ุฌููุจูุฏ", "BMW", "E60"],
                isPopular: false,
                discount: 0
            },
            {
                id: 27,
                name: "ุชููพ ุณุฑ ฺฉูฺฉ BMW 528 - Lemforder",
                price: 7500000,
                originalPrice: 7500000,
                image: "โช",
                brand: "BMW",
                category: "front_suspension",
                description: "ุชููพ ุณุฑ ฺฉูฺฉ ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 12,
                rating: 4.7,
                reviews: 9,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุชููพ", "ุณุฑ ฺฉูฺฉ", "ุฌููุจูุฏ", "BMW", "528"],
                isPopular: false,
                discount: 0
            },
            {
                id: 28,
                name: "ููุชุฑ ฺฏุฑุจฺฉุณ BMW 528 - ZF",
                price: 6800000,
                originalPrice: 6800000,
                image: "๐ง",
                brand: "BMW",
                category: "gearbox",
                description: "ููุชุฑ ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 4,
                rating: 4.9,
                reviews: 3,
                specifications: {
                    "ุจุฑูุฏ": "ZF",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ููุน ฺฏุฑุจฺฉุณ": "ุงุชููุงุชฺฉ"
                },
                tags: ["ููุชุฑ", "ฺฏุฑุจฺฉุณ", "BMW", "528"],
                isPopular: false,
                discount: 0
            },
            {
                id: 29,
                name: "ุฑูุบู ฺฏุฑุจฺฉุณ BMW 528 - ZF",
                price: 1000000,
                originalPrice: 1000000,
                image: "๐ข๏ธ",
                brand: "BMW",
                category: "gearbox",
                description: "ุฑูุบู ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 8,
                rating: 4.8,
                reviews: 6,
                specifications: {
                    "ุจุฑูุฏ": "ZF",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ุญุฌู": "7 ูุชุฑ"
                },
                tags: ["ุฑูุบู", "ฺฏุฑุจฺฉุณ", "BMW", "528"],
                isPopular: true,
                discount: 0
            },
            {
                id: 30,
                name: "ุฑูุบู ฺฏุฑุจฺฉุณ BMW E60 - ZF",
                price: 1000000,
                originalPrice: 1000000,
                image: "๐ข๏ธ",
                brand: "BMW",
                category: "gearbox",
                description: "ุฑูุบู ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW E60",
                stock: 7,
                rating: 4.8,
                reviews: 5,
                specifications: {
                    "ุจุฑูุฏ": "ZF",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ุญุฌู": "7 ูุชุฑ"
                },
                tags: ["ุฑูุบู", "ฺฏุฑุจฺฉุณ", "BMW", "E60"],
                isPopular: false,
                discount: 0
            },
            {
                id: 31,
                name: "ุตุงู ฺฏุฑุจฺฉุณ BMW E60 - ZF",
                price: 6800000,
                originalPrice: 6800000,
                image: "๐ง",
                brand: "BMW",
                category: "gearbox",
                description: "ุตุงู ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW E60",
                stock: 3,
                rating: 4.9,
                reviews: 4,
                specifications: {
                    "ุจุฑูุฏ": "ZF",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ููุน ฺฏุฑุจฺฉุณ": "ุงุชููุงุชฺฉ"
                },
                tags: ["ุตุงู", "ฺฏุฑุจฺฉุณ", "BMW", "E60"],
                isPopular: false,
                discount: 0
            },
            {
                id: 32,
                name: "ุฏุณุชู ฺฏุฑุจฺฉุณ BMW 528 - Lemforder",
                price: 2200000,
                originalPrice: 2200000,
                image: "๐",
                brand: "BMW",
                category: "gearbox",
                description: "ุฏุณุชู ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 6,
                rating: 4.7,
                reviews: 8,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ฺฏุฑุจฺฉุณ", "ฺฏุฑุจฺฉุณ", "BMW", "528"],
                isPopular: false,
                discount: 0
            },
            {
                id: 33,
                name: "ุฏุณุชู ฺฏุฑุจฺฉุณ BMW E83 - Lemforder",
                price: 3700000,
                originalPrice: 3700000,
                image: "๐",
                brand: "BMW",
                category: "gearbox",
                description: "ุฏุณุชู ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW E83",
                stock: 4,
                rating: 4.8,
                reviews: 6,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ฺฏุฑุจฺฉุณ", "ฺฏุฑุจฺฉุณ", "BMW", "E83"],
                isPopular: false,
                discount: 0
            },
            {
                id: 34,
                name: "ุฏุณุชู ฺฏุฑุจฺฉุณ BMW E60 - Lemforder",
                price: 1700000,
                originalPrice: 1700000,
                image: "๐",
                brand: "BMW",
                category: "gearbox",
                description: "ุฏุณุชู ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW E60",
                stock: 8,
                rating: 4.6,
                reviews: 7,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ฺฏุฑุจฺฉุณ", "ฺฏุฑุจฺฉุณ", "BMW", "E60"],
                isPopular: false,
                discount: 0
            },
            {
                id: 35,
                name: "ุฏุณุชู ฺฏุฑุจฺฉุณ BMW E90 - Lemforder",
                price: 1200000,
                originalPrice: 1200000,
                image: "๐",
                brand: "BMW",
                category: "gearbox",
                description: "ุฏุณุชู ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW E90",
                stock: 9,
                rating: 4.7,
                reviews: 10,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ฺฏุฑุจฺฉุณ", "ฺฏุฑุจฺฉุณ", "BMW", "E90"],
                isPopular: true,
                discount: 0
            },
            {
                id: 36,
                name: "ุฏุณุชู ฺฏุฑุจฺฉุณ BMW X4 - Lemforder",
                price: 5000000,
                originalPrice: 5000000,
                image: "๐",
                brand: "BMW",
                category: "gearbox",
                description: "ุฏุณุชู ฺฏุฑุจฺฉุณ ุงุตู ุขููุงู ุจุฑุง BMW X4",
                stock: 3,
                rating: 4.8,
                reviews: 5,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "18 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ฺฏุฑุจฺฉุณ", "ฺฏุฑุจฺฉุณ", "BMW", "X4"],
                isPopular: false,
                discount: 0
            },
            {
                id: 37,
                name: "ุถุฏ ุฎ BMW - ุงูุฑุฌูุงู",
                price: 150000,
                originalPrice: 150000,
                image: "โ๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ุถุฏ ุฎ ุงูุฑุฌูุงู ุจุฑุง BMW",
                stock: 25,
                rating: 4.5,
                reviews: 15,
                specifications: {
                    "ุจุฑูุฏ": "BMW",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "6 ูุงู",
                    "ุญุฌู": "1.5 ูุชุฑ"
                },
                tags: ["ุถุฏ ุฎ", "ููุชูุฑ", "BMW"],
                isPopular: true,
                discount: 0
            },
            {
                id: 38,
                name: "ุถุฏ ุฎ BMW ูุจ - Febi",
                price: 850000,
                originalPrice: 850000,
                image: "โ๏ธ",
                brand: "BMW",
                category: "engine",
                description: "ุถุฏ ุฎ ุงุตู ุขููุงู ุจุฑุง BMW",
                stock: 12,
                rating: 4.7,
                reviews: 8,
                specifications: {
                    "ุจุฑูุฏ": "Febi",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู",
                    "ุญุฌู": "5 ูุชุฑ"
                },
                tags: ["ุถุฏ ุฎ", "ููุชูุฑ", "BMW", "Febi"],
                isPopular: false,
                discount: 0
            },
            {
                id: 39,
                name: "ุฏุณุชู ููุชูุฑ BMW 528 - Lemforder",
                price: 3900000,
                originalPrice: 3900000,
                image: "๐ง",
                brand: "BMW",
                category: "front_suspension",
                description: "ุฏุณุชู ููุชูุฑ ุงุตู ุขููุงู ุจุฑุง BMW 528",
                stock: 5,
                rating: 4.8,
                reviews: 7,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ููุชูุฑ", "ุฌููุจูุฏ", "BMW", "528"],
                isPopular: false,
                discount: 0
            },
            {
                id: 40,
                name: "ุฏุณุชู ููุชูุฑ BMW X4 ู X3 - Lemforder",
                price: 7900000,
                originalPrice: 7900000,
                image: "๐ง",
                brand: "BMW",
                category: "front_suspension",
                description: "ุฏุณุชู ููุชูุฑ ุงุตู ุขููุงู ุจุฑุง BMW X4 ู X3",
                stock: 3,
                rating: 4.9,
                reviews: 4,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ููุชูุฑ", "ุฌููุจูุฏ", "BMW", "X4", "X3"],
                isPopular: false,
                discount: 0
            },
            {
                id: 41,
                name: "ุฏุณุชู ููุชูุฑ BMW E60 - Lemforder",
                price: 2700000,
                originalPrice: 2700000,
                image: "๐ง",
                brand: "BMW",
                category: "front_suspension",
                description: "ุฏุณุชู ููุชูุฑ ุงุตู ุขููุงู ุจุฑุง BMW E60",
                stock: 7,
                rating: 4.7,
                reviews: 9,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ููุชูุฑ", "ุฌููุจูุฏ", "BMW", "E60"],
                isPopular: false,
                discount: 0
            },
            {
                id: 42,
                name: "ุฏุณุชู ููุชูุฑ BMW E90 - Lemforder",
                price: 4600000,
                originalPrice: 4600000,
                image: "๐ง",
                brand: "BMW",
                category: "front_suspension",
                description: "ุฏุณุชู ููุชูุฑ ุงุตู ุขููุงู ุจุฑุง BMW E90",
                stock: 4,
                rating: 4.8,
                reviews: 6,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ููุชูุฑ", "ุฌููุจูุฏ", "BMW", "E90"],
                isPopular: false,
                discount: 0
            },
            {
                id: 43,
                name: "ุฏุณุชู ููุชูุฑ BMW E83 - Lemforder",
                price: 3400000,
                originalPrice: 3400000,
                image: "๐ง",
                brand: "BMW",
                category: "front_suspension",
                description: "ุฏุณุชู ููุชูุฑ ุงุตู ุขููุงู ุจุฑุง BMW E83",
                stock: 6,
                rating: 4.6,
                reviews: 5,
                specifications: {
                    "ุจุฑูุฏ": "Lemforder",
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "24 ูุงู",
                    "ุฌูุณ": "ูุงุณุชฺฉ ู ููุฒ"
                },
                tags: ["ุฏุณุชู ููุชูุฑ", "ุฌููุจูุฏ", "BMW", "E83"],
                isPopular: false,
                discount: 0
            }
        ];

        // Global variables
        let cart = [];
        let wishlist = [];
        let compareList = [];
        let currentUser = null;
        let users = [];
        let orders = [];
        let currentFilter = 'all';
        let currentCategory = 'all';
        let isAdminLoggedIn = false;
        let editingProductId = null;
        let nextProductId = 44;
        let nextOrderId = 1;
        let displayedProducts = 8;
        let searchTimeout;
        let currentPage = 'home';

        // Telegram Bot Configuration
        let TELEGRAM_BOT_TOKEN = localStorage.getItem('telegram_bot_token') || '';
        let TELEGRAM_CHAT_ID = localStorage.getItem('telegram_chat_id') || '';
        let ADMIN_EMAIL = localStorage.getItem('admin_email') || '';
        let SHOP_NAME = localStorage.getItem('shop_name') || 'B\\S PARTS';

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            const targetPage = document.getElementById(pageId + 'Page');
            if (targetPage) {
                targetPage.classList.add('active');
                currentPage = pageId;
                
                // If showing home page, make sure products are rendered
                if (pageId === 'home') {
                    renderProducts();
                }
            }
        }

        // Contact form submission
        function sendContactMessage(event) {
            event.preventDefault();
            showNotification('ูพุงู ุดูุง ุจุง ููููุช ุงุฑุณุงู ุดุฏ. ุจู ุฒูุฏ ุจุง ุดูุง ุชูุงุณ ุฎูุงูู ฺฏุฑูุช.');
            event.target.reset();
        }

        // Initialize the application
        function init() {
            loadDataFromStorage();
            updateCartBadge();
            updateWishlistBadge();
            checkUserLogin();
            showPage('home');
            
            // Render products after a short delay to ensure DOM is ready
            setTimeout(() => {
                renderProducts();
            }, 100);
            
            // Add event listeners for search
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', searchProducts);
                searchInput.addEventListener('keypress', handleSearchEnter);
            }
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.dropdown')) {
                    hideSearchSuggestions();
                }
            });
        }

        // User authentication functions
        function showUserPanel() {
            if (!currentUser) {
                showUserModal();
                return;
            }
            
            document.getElementById('userPanelModal').classList.remove('hidden');
            document.getElementById('userPanelModal').classList.add('flex');
            showUserOrders();
        }

        function closeUserPanel() {
            document.getElementById('userPanelModal').classList.add('hidden');
            document.getElementById('userPanelModal').classList.remove('flex');
        }

        function showUserModal() {
            document.getElementById('userModal').classList.remove('hidden');
            document.getElementById('userModal').classList.add('flex');
        }

        function closeUserModal() {
            document.getElementById('userModal').classList.add('hidden');
            document.getElementById('userModal').classList.remove('flex');
        }

        function showLoginForm() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('userModalTitle').textContent = 'ูุฑูุฏ ุจู ุญุณุงุจ ฺฉุงุฑุจุฑ';
        }

        function showRegisterForm() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
            document.getElementById('userModalTitle').textContent = 'ุซุจุช ูุงู';
        }

        function loginUser() {
            const phone = document.getElementById('loginPhone').value.trim();
            const password = document.getElementById('loginPassword').value.trim();

            if (!phone || !password) {
                showNotification('ูุทูุงู ุชูุงู ููุฏูุง ุฑุง ูพุฑ ฺฉูุฏ');
                return;
            }

            const user = users.find(u => u.phone === phone && u.password === password);
            if (user) {
                currentUser = user;
                document.getElementById('userDisplayName').textContent = user.name;
                closeUserModal();
                showNotification('ุฎูุด ุขูุฏุฏ ' + user.name);
                saveDataToStorage();
            } else {
                showNotification('ุดูุงุฑู ุชููู ุง ุฑูุฒ ุนุจูุฑ ุงุดุชุจุงู ุงุณุช');
            }
        }

        function registerUser() {
            const name = document.getElementById('registerName').value.trim();
            const phone = document.getElementById('registerPhone').value.trim();
            const password = document.getElementById('registerPassword').value.trim();
            const confirmPassword = document.getElementById('registerConfirmPassword').value.trim();

            if (!name || !phone || !password || !confirmPassword) {
                showNotification('ูุทูุงู ุชูุงู ููุฏูุง ุฑุง ูพุฑ ฺฉูุฏ');
                return;
            }

            if (password !== confirmPassword) {
                showNotification('ุฑูุฒ ุนุจูุฑ ู ุชฺฉุฑุงุฑ ุขู ฺฉุณุงู ูุณุช');
                return;
            }

            if (users.find(u => u.phone === phone)) {
                showNotification('ุงู ุดูุงุฑู ุชููู ูุจูุงู ุซุจุช ุดุฏู ุงุณุช');
                return;
            }

            const newUser = {
                id: Date.now(),
                name,
                phone,
                password,
                addresses: [],
                orders: []
            };

            users.push(newUser);
            currentUser = newUser;
            document.getElementById('userDisplayName').textContent = name;
            closeUserModal();
            showNotification('ุซุจุช ูุงู ุจุง ููููุช ุงูุฌุงู ุดุฏ');
            saveDataToStorage();
        }

        function logoutUser() {
            currentUser = null;
            document.getElementById('userDisplayName').textContent = 'ูุฑูุฏ';
            closeUserPanel();
            showNotification('ุงุฒ ุญุณุงุจ ุฎูุฏ ุฎุงุฑุฌ ุดุฏุฏ');
            saveDataToStorage();
        }

        function checkUserLogin() {
            if (currentUser) {
                document.getElementById('userDisplayName').textContent = currentUser.name;
            }
        }

        function showUserOrders() {
            const userOrders = orders.filter(order => order.userId === currentUser?.id);
            document.getElementById('userPanelContent').innerHTML = `
                <h4 class="font-semibold mb-4">ุณูุงุฑุดุงุช ูู</h4>
                ${userOrders.length > 0 ? userOrders.map(order => `
                    <div class="border rounded-lg p-4 mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <span class="font-medium">ุณูุงุฑุด #${order.id}</span>
                            <span class="text-sm text-gray-500">${new Date(order.date).toLocaleDateString('fa-IR')}</span>
                        </div>
                        <div class="text-sm text-gray-600 mb-2">
                            ${order.items.length} ูุญุตูู - ${order.total.toLocaleString()} ุชููุงู
                        </div>
                        <div class="text-sm">
                            ูุถุนุช: <span class="font-medium">${getOrderStatusText(order.status)}</span>
                        </div>
                    </div>
                `).join('') : '<p class="text-gray-500">ูููุฒ ุณูุงุฑุด ูุฏุงุฑุฏ</p>'}
            `;
        }

        function showUserProfile() {
            document.getElementById('userPanelContent').innerHTML = `
                <h4 class="font-semibold mb-4">ูพุฑููุงู ฺฉุงุฑุจุฑ</h4>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-1">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ</label>
                        <input type="text" value="${currentUser.name}" class="w-full px-3 py-2 border rounded-lg">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-1">ุดูุงุฑู ุชููู</label>
                        <input type="tel" value="${currentUser.phone}" class="w-full px-3 py-2 border rounded-lg" readonly>
                    </div>
                    <button class="apple-button text-white px-4 py-2 rounded-lg">ุฐุฎุฑู ุชุบุฑุงุช</button>
                </div>
            `;
        }

        function showUserAddresses() {
            document.getElementById('userPanelContent').innerHTML = `
                <h4 class="font-semibold mb-4">ุขุฏุฑุณโูุง ูู</h4>
                <div class="space-y-4">
                    ${currentUser.addresses?.length > 0 ? currentUser.addresses.map(address => `
                        <div class="border rounded-lg p-4">
                            <div class="font-medium mb-2">${address.title}</div>
                            <div class="text-sm text-gray-600">${address.address}</div>
                        </div>
                    `).join('') : '<p class="text-gray-500">ุขุฏุฑุณ ุซุจุช ูุดุฏู ุงุณุช</p>'}
                    <button class="apple-button text-white px-4 py-2 rounded-lg">ุงูุฒูุฏู ุขุฏุฑุณ ุฌุฏุฏ</button>
                </div>
            `;
        }

        // Admin functions
        function showAdminLogin() {
            document.getElementById('adminLoginModal').classList.remove('hidden');
            document.getElementById('adminLoginModal').classList.add('flex');
        }

        function closeAdminLogin() {
            document.getElementById('adminLoginModal').classList.add('hidden');
            document.getElementById('adminLoginModal').classList.remove('flex');
        }

        function checkAdminPassword() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'admin123') {
                isAdminLoggedIn = true;
                closeAdminLogin();
                showAdminPanel();
                showNotification('ูุฑูุฏ ูููู ุจู ูพูู ูุฏุฑุช');
            } else {
                showNotification('ุฑูุฒ ุนุจูุฑ ุงุดุชุจุงู ุงุณุช');
            }
            // Clear password field
            document.getElementById('adminPassword').value = '';
        }

        function showAdminPanel() {
            document.getElementById('adminPanel').classList.remove('hidden');
            showAdminProducts();
        }

        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.add('hidden');
            isAdminLoggedIn = false;
        }

        function showAdminProducts() {
            setActiveAdminTab('adminProductsBtn');
            document.getElementById('adminContent').innerHTML = `
                <div class="bg-white rounded-lg p-6 mb-6">
                    <h3 class="text-lg font-semibold mb-4">ุงูุฒูุฏู ูุญุตูู ุฌุฏุฏ</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="newProductName" placeholder="ูุงู ูุญุตูู" class="px-3 py-2 border rounded-lg">
                        <input type="number" id="newProductPrice" placeholder="ููุช" class="px-3 py-2 border rounded-lg">
                        <input type="number" id="newProductOriginalPrice" placeholder="ููุช ุงุตู (ุงุฎุชุงุฑ)" class="px-3 py-2 border rounded-lg">
                        <input type="number" id="newProductStock" placeholder="ููุฌูุฏ" class="px-3 py-2 border rounded-lg">
                        <select id="newProductBrand" class="px-3 py-2 border rounded-lg">
                            <option value="BMW">BMW</option>
                            <option value="Mercedes">Mercedes</option>
                            <option value="Porsche">Porsche</option>
                        </select>
                        <select id="newProductCategory" class="px-3 py-2 border rounded-lg">
                            <option value="brake">ููุช ู ุฏุณฺฉ ุชุฑูุฒ</option>
                            <option value="suspension">ุณุณุชู ุชุนูู</option>
                            <option value="engine">ูุทุนุงุช ููุชูุฑ</option>
                            <option value="front_suspension">ุฌููุจูุฏ</option>
                            <option value="gearbox">ฺฏุฑุจฺฉุณ</option>
                            <option value="electrical">ุณุณุชู ุจุฑู</option>
                            <option value="body">ููุงุฒู ุจุฏูู</option>
                        </select>
                        <input type="text" id="newProductImage" placeholder="ุงููุฌ ูุญุตูู (๐ง)" class="px-3 py-2 border rounded-lg">
                        <textarea id="newProductDescription" placeholder="ุชูุถุญุงุช ูุญุตูู" class="px-3 py-2 border rounded-lg col-span-1 md:col-span-2"></textarea>
                    </div>
                    <button onclick="addNewProduct()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        ุงูุฒูุฏู ูุญุตูู
                    </button>
                </div>

                <div class="bg-white rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">ูุณุช ูุญุตููุงุช</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-right p-2">ูุงู</th>
                                    <th class="text-right p-2">ููุช</th>
                                    <th class="text-right p-2">ููุฌูุฏ</th>
                                    <th class="text-right p-2">ุจุฑูุฏ</th>
                                    <th class="text-right p-2">ุนููุงุช</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${products.map(product => `
                                    <tr class="border-b">
                                        <td class="p-2">${product.name}</td>
                                        <td class="p-2">${product.price.toLocaleString()}</td>
                                        <td class="p-2">${product.stock}</td>
                                        <td class="p-2">${product.brand}</td>
                                        <td class="p-2">
                                            <button onclick="editProduct(${product.id})" class="text-blue-600 hover:text-blue-800 ml-2">ูุฑุงุด</button>
                                            <button onclick="deleteProduct(${product.id})" class="text-red-600 hover:text-red-800">ุญุฐู</button>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function showAdminOrders() {
            setActiveAdminTab('adminOrdersBtn');
            document.getElementById('adminContent').innerHTML = `
                <div class="bg-white rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">ูุฏุฑุช ุณูุงุฑุดุงุช</h3>
                    ${orders.length > 0 ? `
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b">
                                        <th class="text-right p-2">ุดูุงุฑู</th>
                                        <th class="text-right p-2">ูุดุชุฑ</th>
                                        <th class="text-right p-2">ูุจูุบ</th>
                                        <th class="text-right p-2">ูุถุนุช</th>
                                        <th class="text-right p-2">ุชุงุฑุฎ</th>
                                        <th class="text-right p-2">ุนููุงุช</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${orders.map(order => `
                                        <tr class="border-b">
                                            <td class="p-2">#${order.id}</td>
                                            <td class="p-2">${order.customerName}</td>
                                            <td class="p-2">${order.total.toLocaleString()}</td>
                                            <td class="p-2">${getOrderStatusText(order.status)}</td>
                                            <td class="p-2">${new Date(order.date).toLocaleDateString('fa-IR')}</td>
                                            <td class="p-2">
                                                <select onchange="updateOrderStatus(${order.id}, this.value)" class="text-sm border rounded px-2 py-1">
                                                    <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>ุฏุฑ ุงูุชุธุงุฑ</option>
                                                    <option value="processing" ${order.status === 'processing' ? 'selected' : ''}>ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด</option>
                                                    <option value="shipped" ${order.status === 'shipped' ? 'selected' : ''}>ุงุฑุณุงู ุดุฏู</option>
                                                    <option value="delivered" ${order.status === 'delivered' ? 'selected' : ''}>ุชุญูู ุฏุงุฏู ุดุฏู</option>
                                                </select>
                                            </td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    ` : '<p class="text-gray-500">ูููุฒ ุณูุงุฑุด ุซุจุช ูุดุฏู ุงุณุช</p>'}
                </div>
            `;
        }

        function showAdminUsers() {
            setActiveAdminTab('adminUsersBtn');
            document.getElementById('adminContent').innerHTML = `
                <div class="bg-white rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">ูุฏุฑุช ฺฉุงุฑุจุฑุงู</h3>
                    ${users.length > 0 ? `
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b">
                                        <th class="text-right p-2">ูุงู</th>
                                        <th class="text-right p-2">ุชููู</th>
                                        <th class="text-right p-2">ุชุนุฏุงุฏ ุณูุงุฑุดุงุช</th>
                                        <th class="text-right p-2">ุชุงุฑุฎ ุนุถูุช</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${users.map(user => `
                                        <tr class="border-b">
                                            <td class="p-2">${user.name}</td>
                                            <td class="p-2">${user.phone}</td>
                                            <td class="p-2">${orders.filter(o => o.userId === user.id).length}</td>
                                            <td class="p-2">${new Date(user.id).toLocaleDateString('fa-IR')}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    ` : '<p class="text-gray-500">ูููุฒ ฺฉุงุฑุจุฑ ุซุจุช ูุงู ูฺฉุฑุฏู ุงุณุช</p>'}
                </div>
            `;
        }

        function showAdminReports() {
            setActiveAdminTab('adminReportsBtn');
            const totalSales = orders.reduce((sum, order) => sum + order.total, 0);
            const totalOrders = orders.length;
            const totalUsers = users.length;
            const totalProducts = products.length;

            document.getElementById('adminContent').innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                    <div class="bg-blue-50 p-6 rounded-lg text-center">
                        <div class="text-2xl font-bold text-blue-600">${totalSales.toLocaleString()}</div>
                        <div class="text-blue-600">ฺฉู ูุฑูุด (ุชููุงู)</div>
                    </div>
                    <div class="bg-green-50 p-6 rounded-lg text-center">
                        <div class="text-2xl font-bold text-green-600">${totalOrders}</div>
                        <div class="text-green-600">ุชุนุฏุงุฏ ุณูุงุฑุดุงุช</div>
                    </div>
                    <div class="bg-purple-50 p-6 rounded-lg text-center">
                        <div class="text-2xl font-bold text-purple-600">${totalUsers}</div>
                        <div class="text-purple-600">ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู</div>
                    </div>
                    <div class="bg-orange-50 p-6 rounded-lg text-center">
                        <div class="text-2xl font-bold text-orange-600">${totalProducts}</div>
                        <div class="text-orange-600">ุชุนุฏุงุฏ ูุญุตููุงุช</div>
                    </div>
                </div>

                <div class="bg-white rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">ฺฏุฒุงุฑุด ูุฑูุด</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center p-4 bg-gray-50 rounded-lg">
                            <span>ูุฑูุด ุงูุฑูุฒ</span>
                            <span class="font-semibold">0 ุชููุงู</span>
                        </div>
                        <div class="flex justify-between items-center p-4 bg-gray-50 rounded-lg">
                            <span>ูุฑูุด ุงู ูุงู</span>
                            <span class="font-semibold">${totalSales.toLocaleString()} ุชููุงู</span>
                        </div>
                        <div class="flex justify-between items-center p-4 bg-gray-50 rounded-lg">
                            <span>ูุญุจูุจโุชุฑู ูุญุตูู</span>
                            <span class="font-semibold">${products.find(p => p.isPopular)?.name || 'ูุฏุงุฑุฏ'}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function showAdminSMS() {
            setActiveAdminTab('adminSMSBtn');
            document.getElementById('adminContent').innerHTML = `
                <div class="space-y-6">
                    <div class="bg-white rounded-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">ุชูุธูุงุช ุชูฺฏุฑุงู ุจุงุช</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2">ุชูฺฉู ุจุงุช ุชูฺฏุฑุงู</label>
                                <input type="text" id="telegramBotToken" value="${TELEGRAM_BOT_TOKEN}" placeholder="123456789:ABCdefGHIjklMNOpqrsTUVwxyz" class="w-full px-3 py-2 border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">Chat ID</label>
                                <input type="text" id="telegramChatId" value="${TELEGRAM_CHAT_ID}" placeholder="123456789" class="w-full px-3 py-2 border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">ุงูู ูุฏุฑ</label>
                                <input type="email" id="adminEmail" value="${ADMIN_EMAIL}" placeholder="admin@example.com" class="w-full px-3 py-2 border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2">ูุงู ูุฑูุดฺฏุงู</label>
                                <input type="text" id="shopName" value="${SHOP_NAME}" placeholder="ูุงู ูุฑูุดฺฏุงู" class="w-full px-3 py-2 border rounded-lg">
                            </div>
                        </div>
                        <button onclick="saveTelegramSettings()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            ุฐุฎุฑู ุชูุธูุงุช
                        </button>
                    </div>

                    <div class="bg-white rounded-lg p-6">
                        <h3 class="text-lg font-semibold mb-4">ุชุณุช ุงุฑุณุงู ูพุงู</h3>
                        <div class="space-y-4">
                            <textarea id="testMessage" placeholder="ูพุงู ุชุณุช ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ..." class="w-full px-3 py-2 border rounded-lg" rows="3">ุณูุงู! ุงู ฺฉ ูพุงู ุชุณุช ุงุณุช.</textarea>
                            <div class="flex space-x-4 space-x-reverse">
                                <button onclick="sendTestTelegram()" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                                    ุงุฑุณุงู ุชุณุช ุชูฺฏุฑุงู
                                </button>
                                <button onclick="sendTestEmail()" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                                    ุงุฑุณุงู ุชุณุช ุงูู
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Checkout functionality
        function proceedToCheckout() {
            if (cart.length === 0) {
                showNotification('ุณุจุฏ ุฎุฑุฏ ุดูุง ุฎุงู ุงุณุช');
                return;
            }

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal >= 5000000 ? 0 : 200000;
            const total = subtotal + shipping;

            document.getElementById('checkoutSummary').innerHTML = cart.map(item => `
                <div class="flex justify-between text-sm">
                    <span>${item.name} ร ${item.quantity}</span>
                    <span>${(item.price * item.quantity).toLocaleString()} ุชููุงู</span>
                </div>
            `).join('') + `
                <div class="border-t pt-2 mt-2">
                    <div class="flex justify-between text-sm">
                        <span>ูุฒูู ุงุฑุณุงู:</span>
                        <span>${shipping === 0 ? 'ุฑุงฺฏุงู' : shipping.toLocaleString() + ' ุชููุงู'}</span>
                    </div>
                </div>
            `;

            document.getElementById('checkoutTotal').textContent = total.toLocaleString() + ' ุชููุงู';

            if (currentUser) {
                document.getElementById('checkoutName').value = currentUser.name;
                document.getElementById('checkoutPhone').value = currentUser.phone;
            }

            document.getElementById('checkoutModal').classList.remove('hidden');
            document.getElementById('checkoutModal').classList.add('flex');
            toggleCart(); // Close cart sidebar
        }

        function closeCheckout() {
            document.getElementById('checkoutModal').classList.add('hidden');
            document.getElementById('checkoutModal').classList.remove('flex');
        }

        function processPayment() {
            const name = document.getElementById('checkoutName').value.trim();
            const phone = document.getElementById('checkoutPhone').value.trim();
            const address = document.getElementById('checkoutAddress').value.trim();
            const notes = document.getElementById('checkoutNotes').value.trim();

            if (!name || !phone || !address) {
                showNotification('ูุทูุงู ุชูุงู ููุฏูุง ุถุฑูุฑ ุฑุง ูพุฑ ฺฉูุฏ');
                return;
            }

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal >= 5000000 ? 0 : 200000;
            const total = subtotal + shipping;

            const order = {
                id: nextOrderId++,
                userId: currentUser?.id,
                customerName: name,
                customerPhone: phone,
                address: address,
                notes: notes,
                items: [...cart],
                subtotal: subtotal,
                shipping: shipping,
                total: total,
                status: 'pending',
                date: new Date().toISOString()
            };

            // Show payment options modal
            showPaymentOptions(order);
        }

        function showPaymentOptions(order) {
            const paymentModal = document.createElement('div');
            paymentModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            paymentModal.innerHTML = `
                <div class="bg-white rounded-2xl p-6 max-w-md w-full">
                    <h3 class="text-xl font-semibold mb-6 text-center">ุงูุชุฎุงุจ ุฑูุด ูพุฑุฏุงุฎุช</h3>
                    
                    <div class="space-y-4">
                        <button onclick="payWithZarinPal(${JSON.stringify(order).replace(/"/g, '&quot;')})" 
                                class="w-full bg-blue-600 text-white py-4 rounded-xl font-medium hover:bg-blue-700 flex items-center justify-center space-x-2 space-x-reverse">
                            <span>๐ณ</span>
                            <span>ูพุฑุฏุงุฎุช ุขููุงู ุจุง ุฒุฑูโูพุงู</span>
                        </button>
                        
                        <button onclick="payInPerson(${JSON.stringify(order).replace(/"/g, '&quot;')})" 
                                class="w-full bg-green-600 text-white py-4 rounded-xl font-medium hover:bg-green-700 flex items-center justify-center space-x-2 space-x-reverse">
                            <span>๐ช</span>
                            <span>ูพุฑุฏุงุฎุช ุญุถูุฑ</span>
                        </button>
                        
                        <button onclick="closePaymentOptions()" 
                                class="w-full bg-gray-300 text-gray-700 py-3 rounded-xl font-medium hover:bg-gray-400">
                            ุงูุตุฑุงู
                        </button>
                    </div>
                    
                    <div class="mt-6 text-center">
                        <div class="text-lg font-semibold">ูุจูุบ ูุงุจู ูพุฑุฏุงุฎุช:</div>
                        <div class="text-2xl font-bold text-blue-600">${order.total.toLocaleString()} ุชููุงู</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(paymentModal);
        }

        function closePaymentOptions() {
            const modal = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-50');
            if (modal) {
                modal.remove();
            }
        }

        function payWithZarinPal(order) {
            // Close payment options modal
            closePaymentOptions();
            closeCheckout();
            
            // Show loading
            showNotification('ุฏุฑ ุญุงู ุงูุชูุงู ุจู ุฏุฑฺฏุงู ูพุฑุฏุงุฎุช...');
            
            // Simulate ZarinPal redirect (in real implementation, you'd redirect to ZarinPal)
            setTimeout(() => {
                // Open ZarinPal link
                window.open('https://zarinp.al/bsparts', '_blank');
                
                // Complete the order (in real implementation, this would happen after successful payment callback)
                completeOrder(order);
                
                showNotification('ูพุฑุฏุงุฎุช ุจุง ููููุช ุงูุฌุงู ุดุฏ! ุณูุงุฑุด ุดูุง ุซุจุช ฺฏุฑุฏุฏ.');
            }, 1500);
        }

        function payInPerson(order) {
            closePaymentOptions();
            closeCheckout();
            
            // Mark as cash on delivery
            order.paymentMethod = 'cash_on_delivery';
            order.status = 'pending_payment';
            
            completeOrder(order);
            showNotification('ุณูุงุฑุด ุดูุง ุซุจุช ุดุฏ. ูพุฑุฏุงุฎุช ููฺฏุงู ุชุญูู ุงูุฌุงู ุฎูุงูุฏ ุดุฏ.');
        }

        function completeOrder(order) {
            orders.push(order);

            // Update product stock
            cart.forEach(item => {
                const product = products.find(p => p.id === item.id);
                if (product) {
                    product.stock -= item.quantity;
                }
            });

            // Send notification to admin
            sendOrderNotification(order);

            // Clear cart
            cart = [];
            updateCartBadge();
            updateCartDisplay();

            saveDataToStorage();
            renderProducts(); // Update stock display
        }

        // Admin product management functions
        function addNewProduct() {
            const name = document.getElementById('newProductName').value.trim();
            const price = parseInt(document.getElementById('newProductPrice').value);
            const originalPrice = parseInt(document.getElementById('newProductOriginalPrice').value) || price;
            const stock = parseInt(document.getElementById('newProductStock').value);
            const brand = document.getElementById('newProductBrand').value;
            const category = document.getElementById('newProductCategory').value;
            const image = document.getElementById('newProductImage').value.trim() || '๐ง';
            const description = document.getElementById('newProductDescription').value.trim();

            if (!name || !price || stock < 0) {
                showNotification('ูุทูุงู ุชูุงู ููุฏูุง ุถุฑูุฑ ุฑุง ูพุฑ ฺฉูุฏ');
                return;
            }

            const newProduct = {
                id: nextProductId++,
                name,
                price,
                originalPrice,
                image,
                brand,
                category,
                description,
                stock,
                rating: 4.5,
                reviews: 0,
                specifications: {
                    "ุจุฑูุฏ": brand,
                    "ฺฉุดูุฑ ุณุงุฒูุฏู": "ุขููุงู",
                    "ฺฏุงุฑุงูุช": "12 ูุงู"
                },
                tags: [name.split(' ')[0], category, brand],
                isPopular: false,
                discount: originalPrice > price ? Math.round(((originalPrice - price) / originalPrice) * 100) : 0
            };

            products.push(newProduct);
            saveDataToStorage();
            renderProducts();
            showAdminProducts();
            showNotification('ูุญุตูู ุฌุฏุฏ ุงุถุงูู ุดุฏ');

            // Clear form
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductOriginalPrice').value = '';
            document.getElementById('newProductStock').value = '';
            document.getElementById('newProductImage').value = '';
            document.getElementById('newProductDescription').value = '';
        }

        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            // Fill form with existing data
            document.getElementById('newProductName').value = product.name;
            document.getElementById('newProductPrice').value = product.price;
            document.getElementById('newProductOriginalPrice').value = product.originalPrice;
            document.getElementById('newProductStock').value = product.stock;
            document.getElementById('newProductBrand').value = product.brand;
            document.getElementById('newProductCategory').value = product.category;
            document.getElementById('newProductImage').value = product.image;
            document.getElementById('newProductDescription').value = product.description;

            editingProductId = productId;
            
            // Change button text
            const addButton = document.querySelector('button[onclick="addNewProduct()"]');
            if (addButton) {
                addButton.textContent = 'ูุฑุงุด ูุญุตูู';
                addButton.setAttribute('onclick', 'updateProduct()');
            }
        }

        function updateProduct() {
            if (!editingProductId) return;

            const product = products.find(p => p.id === editingProductId);
            if (!product) return;

            const name = document.getElementById('newProductName').value.trim();
            const price = parseInt(document.getElementById('newProductPrice').value);
            const originalPrice = parseInt(document.getElementById('newProductOriginalPrice').value) || price;
            const stock = parseInt(document.getElementById('newProductStock').value);
            const brand = document.getElementById('newProductBrand').value;
            const category = document.getElementById('newProductCategory').value;
            const image = document.getElementById('newProductImage').value.trim() || '๐ง';
            const description = document.getElementById('newProductDescription').value.trim();

            if (!name || !price || stock < 0) {
                showNotification('ูุทูุงู ุชูุงู ููุฏูุง ุถุฑูุฑ ุฑุง ูพุฑ ฺฉูุฏ');
                return;
            }

            // Update product
            product.name = name;
            product.price = price;
            product.originalPrice = originalPrice;
            product.stock = stock;
            product.brand = brand;
            product.category = category;
            product.image = image;
            product.description = description;
            product.discount = originalPrice > price ? Math.round(((originalPrice - price) / originalPrice) * 100) : 0;

            saveDataToStorage();
            renderProducts();
            showAdminProducts();
            showNotification('ูุญุตูู ูุฑุงุด ุดุฏ');

            // Reset form
            editingProductId = null;
            const addButton = document.querySelector('button[onclick="updateProduct()"]');
            if (addButton) {
                addButton.textContent = 'ุงูุฒูุฏู ูุญุตูู';
                addButton.setAttribute('onclick', 'addNewProduct()');
            }
            
            // Clear form
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductPrice').value = '';
            document.getElementById('newProductOriginalPrice').value = '';
            document.getElementById('newProductStock').value = '';
            document.getElementById('newProductImage').value = '';
            document.getElementById('newProductDescription').value = '';
        }

        function deleteProduct(productId) {
            if (confirm('ุขุง ุงุฒ ุญุฐู ุงู ูุญุตูู ุงุทููุงู ุฏุงุฑุฏุ')) {
                products = products.filter(p => p.id !== productId);
                saveDataToStorage();
                renderProducts();
                showAdminProducts();
                showNotification('ูุญุตูู ุญุฐู ุดุฏ');
            }
        }

        function setActiveAdminTab(activeTabId) {
            const tabs = ['adminProductsBtn', 'adminOrdersBtn', 'adminUsersBtn', 'adminReportsBtn', 'adminSMSBtn'];
            tabs.forEach(tabId => {
                const tab = document.getElementById(tabId);
                if (tab) {
                    if (tabId === activeTabId) {
                        tab.className = 'px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700';
                    } else {
                        tab.className = 'px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700';
                    }
                }
            });
        }

        function updateOrderStatus(orderId, newStatus) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                order.status = newStatus;
                saveDataToStorage();
                showNotification('ูุถุนุช ุณูุงุฑุด ุจูโุฑูุฒุฑุณุงู ุดุฏ');
            }
        }

        function getOrderStatusText(status) {
            const statusMap = {
                'pending': 'ุฏุฑ ุงูุชุธุงุฑ',
                'processing': 'ุฏุฑ ุญุงู ูพุฑุฏุงุฒุด',
                'shipped': 'ุงุฑุณุงู ุดุฏู',
                'delivered': 'ุชุญูู ุฏุงุฏู ุดุฏู'
            };
            return statusMap[status] || status;
        }

        function validatePhoneNumber(phone) {
            const phoneRegex = /^(\+98|0)?9\d{9}$/;
            return phoneRegex.test(phone);
        }

        function showNotification(message) {
            const toast = document.getElementById('notificationToast');
            const messageSpan = document.getElementById('notificationMessage');
            
            messageSpan.textContent = message;
            toast.classList.remove('translate-x-full');
            
            setTimeout(() => {
                toast.classList.add('translate-x-full');
            }, 3000);
        }

        function showCatalog() {
            showNotification('ฺฉุงุชุงููฺฏ ุฏุฑ ุญุงู ุขูุงุฏูโุณุงุฒ ุงุณุช...');
        }

        // Missing utility functions
        function setRating(rating) {
            const stars = document.querySelectorAll('[data-star]');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.textContent = 'โ';
                    star.classList.add('text-yellow-400');
                } else {
                    star.textContent = 'โ';
                    star.classList.remove('text-yellow-400');
                }
            });
        }

        function removeFromCompare(productId) {
            compareList = compareList.filter(id => id !== productId);
            showCompareProducts();
            showNotification('ูุญุตูู ุงุฒ ููุงุณู ุญุฐู ุดุฏ');
        }

        function clearCompareList() {
            compareList = [];
            showCompareProducts();
            showNotification('ูุณุช ููุงุณู ูพุงฺฉ ุดุฏ');
        }

        function closeCompareProducts() {
            document.getElementById('compareModal').classList.add('hidden');
            document.getElementById('compareModal').classList.remove('flex');
        }

        // Initialize app when page loads
        document.addEventListener('DOMContentLoaded', init);

        // Telegram Bot Functions
        async function sendTelegramMessage(message) {
            if (!TELEGRAM_BOT_TOKEN || !TELEGRAM_CHAT_ID) {
                console.log('ุชูุธูุงุช ุชูฺฏุฑุงู ุจุงุช ฺฉุงูู ูุณุช');
                return false;
            }

            try {
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                });
                
                const result = await response.json();
                if (result.ok) {
                    console.log('โ ูพุงู ุชูฺฏุฑุงู ุงุฑุณุงู ุดุฏ:', result);
                    return true;
                } else {
                    console.error('โ ุฎุทุง ุฏุฑ ุงุฑุณุงู ูพุงู ุชูฺฏุฑุงู:', result);
                    return false;
                }
            } catch (error) {
                console.error('โ ุฎุทุง ุฏุฑ ุงุชุตุงู ุจู ุชูฺฏุฑุงู:', error);
                return false;
            }
        }

        // Send order notification to admin via Telegram
        function sendOrderNotification(order) {
            const adminMessage = `๐ <b>ุณูุงุฑุด ุฌุฏุฏ ุฏุฑ ${SHOP_NAME}!</b>

๐ค ูุดุชุฑ: ${order.customerName}
๐ฑ ุชููู: ${order.customerPhone}
๐ฐ ูุจูุบ: ${order.total.toLocaleString()} ุชููุงู
๐ ุดูุงุฑู ุณูุงุฑุด: #${order.id}

๐ฆ ${order.items.length} ูุญุตูู:
${order.items.map(item => `โข ${item.name} ร ${item.quantity}`).join('\n')}

๐ ุขุฏุฑุณ: ${order.address}
${order.notes ? `๐ ุชูุถุญุงุช: ${order.notes}` : ''}

โฐ ${new Date().toLocaleString('fa-IR')}

๐ ุจุฑุง ูุฏุฑุช ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ`;

            // Send to admin via Telegram
            sendTelegramMessage(adminMessage);

            // Customer confirmation message (logged for demo)
            const customerMessage = `ุณูุงู ${order.customerName} ุนุฒุฒ

โ ุณูุงุฑุด ุดูุง ุฏุฑ ${SHOP_NAME} ุจุง ููููุช ุซุจุช ุดุฏ.

๐ ุดูุงุฑู ุณูุงุฑุด: #${order.id}
๐ฐ ูุจูุบ: ${order.total.toLocaleString()} ุชููุงู
๐ ุชุงุฑุฎ: ${new Date().toLocaleDateString('fa-IR')}

๐ฆ ูุญุตููุงุช:
${order.items.map(item => `โข ${item.name} ร ${item.quantity}`).join('\n')}

๐ ุจุฑุง ูพฺฏุฑ: 02136059698
๐ฑ ููุจุงู: 09124583607

๐ ุงุฒ ุฎุฑุฏ ุดูุง ูุชุดฺฉุฑู
${SHOP_NAME}`;

            console.log('๐ง ูพุงู ุชุงุฏ ูุดุชุฑ:', customerMessage);
        }

        // Admin functions for Telegram settings
        function saveTelegramSettings() {
            const botToken = document.getElementById('telegramBotToken').value.trim();
            const chatId = document.getElementById('telegramChatId').value.trim();
            const adminEmail = document.getElementById('adminEmail').value.trim();
            const shopName = document.getElementById('shopName').value.trim();

            if (!botToken || !chatId) {
                showNotification('ูุทูุงู ุชูฺฉู ุจุงุช ู Chat ID ุฑุง ูุงุฑุฏ ฺฉูุฏ');
                return;
            }

            TELEGRAM_BOT_TOKEN = botToken;
            TELEGRAM_CHAT_ID = chatId;
            ADMIN_EMAIL = adminEmail;
            SHOP_NAME = shopName;

            localStorage.setItem('telegram_bot_token', botToken);
            localStorage.setItem('telegram_chat_id', chatId);
            localStorage.setItem('admin_email', adminEmail);
            localStorage.setItem('shop_name', shopName);

            showNotification('ุชูุธูุงุช ุชูฺฏุฑุงู ุฐุฎุฑู ุดุฏ');
        }

        function saveSMSTemplates() {
            const orderConfirmTemplate = document.getElementById('orderConfirmTemplate').value;
            const newOrderAdminTemplate = document.getElementById('newOrderAdminTemplate').value;

            localStorage.setItem('sms_order_confirm_template', orderConfirmTemplate);
            localStorage.setItem('sms_new_order_admin_template', newOrderAdminTemplate);

            showNotification('ูุงูุจโูุง ูพุงูฺฉ ุฐุฎุฑู ุดุฏ');
        }

        function sendTestTelegram() {
            const testMessage = document.getElementById('testMessage').value;
            
            if (!testMessage.trim()) {
                showNotification('ูุทูุงู ูพุงู ุชุณุช ุฑุง ูุงุฑุฏ ฺฉูุฏ');
                return;
            }

            if (!TELEGRAM_BOT_TOKEN || !TELEGRAM_CHAT_ID) {
                showNotification('ุงุจุชุฏุง ุชูุธูุงุช ุชูฺฏุฑุงู ุฑุง ฺฉุงูู ฺฉูุฏ');
                return;
            }

            sendTelegramMessage(testMessage).then(success => {
                if (success) {
                    showNotification('โ ูพุงู ุชุณุช ุจุง ููููุช ุงุฑุณุงู ุดุฏ!');
                } else {
                    showNotification('โ ุฎุทุง ุฏุฑ ุงุฑุณุงู ูพุงู ุชุณุช');
                }
            });
        }

        function sendTestEmail() {
            const testMessage = document.getElementById('testMessage').value;
            
            if (!ADMIN_EMAIL) {
                showNotification('ุงุจุชุฏุง ุงูู ูุฏุฑ ุฑุง ุฏุฑ ุชูุธูุงุช ูุงุฑุฏ ฺฉูุฏ');
                return;
            }

            // Simulate email sending (in real implementation, you'd use a backend service)
            console.log('๐ง ุงุฑุณุงู ุงูู ุชุณุช ุจู:', ADMIN_EMAIL);
            console.log('๐ง ูุญุชูุง ุงูู:', testMessage);
            
            showNotification('โ ุงูู ุชุณุช ุงุฑุณุงู ุดุฏ (ุดุจูโุณุงุฒ)');
        }

        // Data persistence functions
        function loadDataFromStorage() {
            const savedProducts = localStorage.getItem('bsparts_products');
            const savedUsers = localStorage.getItem('bsparts_users');
            const savedOrders = localStorage.getItem('bsparts_orders');
            const savedCurrentUser = localStorage.getItem('bsparts_currentUser');
            const savedCart = localStorage.getItem('bsparts_cart');
            const savedWishlist = localStorage.getItem('bsparts_wishlist');
            const savedNextId = localStorage.getItem('bsparts_nextId');
            const savedNextOrderId = localStorage.getItem('bsparts_nextOrderId');
            
            if (savedProducts) products = JSON.parse(savedProducts);
            if (savedUsers) users = JSON.parse(savedUsers);
            if (savedOrders) orders = JSON.parse(savedOrders);
            if (savedCurrentUser) currentUser = JSON.parse(savedCurrentUser);
            if (savedCart) cart = JSON.parse(savedCart);
            if (savedWishlist) wishlist = JSON.parse(savedWishlist);
            if (savedNextId) nextProductId = parseInt(savedNextId);
            if (savedNextOrderId) nextOrderId = parseInt(savedNextOrderId);
        }

        function saveDataToStorage() {
            localStorage.setItem('bsparts_products', JSON.stringify(products));
            localStorage.setItem('bsparts_users', JSON.stringify(users));
            localStorage.setItem('bsparts_orders', JSON.stringify(orders));
            localStorage.setItem('bsparts_currentUser', JSON.stringify(currentUser));
            localStorage.setItem('bsparts_cart', JSON.stringify(cart));
            localStorage.setItem('bsparts_wishlist', JSON.stringify(wishlist));
            localStorage.setItem('bsparts_nextId', nextProductId.toString());
            localStorage.setItem('bsparts_nextOrderId', nextOrderId.toString());
        }

        // Product functions
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            if (!grid) return;

            let filteredProducts = [...products];

            // Apply filters
            if (currentFilter !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.brand === currentFilter);
            }

            if (currentCategory !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === currentCategory);
            }

            // Apply price filter
            const priceFilter = document.getElementById('priceFilter')?.value;
            if (priceFilter && priceFilter !== 'all') {
                const [min, max] = priceFilter.split('-').map(Number);
                filteredProducts = filteredProducts.filter(product => 
                    product.price >= min && product.price <= max
                );
            }

            // Apply stock filter
            const stockFilter = document.getElementById('stockFilter')?.value;
            if (stockFilter && stockFilter !== 'all') {
                if (stockFilter === 'instock') {
                    filteredProducts = filteredProducts.filter(product => product.stock > 0);
                } else if (stockFilter === 'outofstock') {
                    filteredProducts = filteredProducts.filter(product => product.stock === 0);
                }
            }

            // Apply sorting
            const sortFilter = document.getElementById('sortFilter')?.value;
            if (sortFilter) {
                switch (sortFilter) {
                    case 'price-low':
                        filteredProducts.sort((a, b) => a.price - b.price);
                        break;
                    case 'price-high':
                        filteredProducts.sort((a, b) => b.price - a.price);
                        break;
                    case 'rating':
                        filteredProducts.sort((a, b) => b.rating - a.rating);
                        break;
                    case 'popular':
                        filteredProducts.sort((a, b) => (b.isPopular ? 1 : 0) - (a.isPopular ? 1 : 0));
                        break;
                    default:
                        filteredProducts.sort((a, b) => b.id - a.id);
                }
            }

            // Update products count
            const countElement = document.getElementById('productsCount');
            if (countElement) {
                countElement.textContent = `ููุงุด ${filteredProducts.length} ูุญุตูู`;
            }

            // Limit displayed products
            const productsToShow = filteredProducts.slice(0, displayedProducts);

            grid.innerHTML = productsToShow.map(product => `
                <div class="product-card bg-white rounded-2xl shadow-sm border hover:shadow-lg transition-all duration-300 ${product.stock === 0 ? 'out-of-stock' : ''}">
                    <div class="relative">
                        ${product.discount > 0 ? `<div class="discount-badge">${product.discount}%</div>` : ''}
                        <div class="p-6 text-center">
                            <div class="text-4xl mb-4">${product.image}</div>
                            <h3 class="font-medium text-gray-900 mb-2 line-clamp-2 h-12">${product.name}</h3>
                            <div class="flex items-center justify-center mb-2">
                                <div class="star-rating text-sm">
                                    ${'โ'.repeat(Math.floor(product.rating))}${'โ'.repeat(5 - Math.floor(product.rating))}
                                </div>
                                <span class="text-xs text-gray-500 mr-1">(${product.reviews})</span>
                            </div>
                            <div class="mb-4">
                                ${product.originalPrice > product.price ? 
                                    `<div class="text-sm text-gray-400 line-through">${product.originalPrice.toLocaleString()} ุชููุงู</div>` : ''
                                }
                                <div class="text-lg font-semibold text-gray-900">${product.price.toLocaleString()} ุชููุงู</div>
                            </div>
                            <div class="text-xs text-gray-500 mb-4">
                                ${product.stock > 0 ? `ููุฌูุฏ (${product.stock})` : 'ูุงููุฌูุฏ'}
                            </div>
                        </div>
                    </div>
                    <div class="p-4 pt-0 space-y-2">
                        <div class="flex space-x-2 space-x-reverse">
                            <button onclick="addToCart(${product.id})" 
                                    class="flex-1 apple-button text-white py-2 px-4 rounded-xl text-sm font-medium ${product.stock === 0 ? 'opacity-50 cursor-not-allowed' : ''}"
                                    ${product.stock === 0 ? 'disabled' : ''}>
                                ุงูุฒูุฏู ุจู ุณุจุฏ
                            </button>
                            <button onclick="toggleWishlist(${product.id})" 
                                    class="p-2 border border-gray-200 rounded-xl hover:bg-gray-50 ${wishlist.includes(product.id) ? 'text-red-500' : 'text-gray-400'}">
                                โค๏ธ
                            </button>
                        </div>
                        <div class="flex space-x-2 space-x-reverse text-xs">
                            <button onclick="showProductDetail(${product.id})" class="flex-1 text-gray-600 hover:text-gray-900 py-1">
                                ุฌุฒุฆุงุช
                            </button>
                            <button onclick="addToCompare(${product.id})" class="flex-1 text-gray-600 hover:text-gray-900 py-1">
                                ููุงุณู
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            // Show/hide load more button
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            if (loadMoreBtn) {
                if (filteredProducts.length > displayedProducts) {
                    loadMoreBtn.classList.remove('hidden');
                } else {
                    loadMoreBtn.classList.add('hidden');
                }
            }
        }

        function loadMoreProducts() {
            displayedProducts += 8;
            renderProducts();
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product || product.stock === 0) {
                showNotification('ูุญุตูู ููุฌูุฏ ูุณุช');
                return;
            }

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                if (existingItem.quantity < product.stock) {
                    existingItem.quantity++;
                    showNotification('ุชุนุฏุงุฏ ูุญุตูู ุฏุฑ ุณุจุฏ ุงูุฒุงุด ุงูุช');
                } else {
                    showNotification('ููุฌูุฏ ฺฉุงู ูุณุช');
                    return;
                }
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image,
                    quantity: 1
                });
                showNotification('ูุญุตูู ุจู ุณุจุฏ ุฎุฑุฏ ุงุถุงูู ุดุฏ');
            }

            updateCartBadge();
            updateCartDisplay();
            saveDataToStorage();
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCartBadge();
            updateCartDisplay();
            saveDataToStorage();
            showNotification('ูุญุตูู ุงุฒ ุณุจุฏ ุฎุฑุฏ ุญุฐู ุดุฏ');
        }

        function updateCartQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            const product = products.find(p => p.id === productId);
            
            if (!item || !product) return;

            const newQuantity = item.quantity + change;
            
            if (newQuantity <= 0) {
                removeFromCart(productId);
                return;
            }
            
            if (newQuantity > product.stock) {
                showNotification('ููุฌูุฏ ฺฉุงู ูุณุช');
                return;
            }

            item.quantity = newQuantity;
            updateCartBadge();
            updateCartDisplay();
            saveDataToStorage();
        }

        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (badge) {
                badge.textContent = totalItems;
                badge.style.display = totalItems > 0 ? 'flex' : 'none';
            }
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartSubtotal = document.getElementById('cartSubtotal');
            const cartShipping = document.getElementById('cartShipping');
            const cartTotal = document.getElementById('cartTotal');

            if (!cartItems) return;

            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="text-center text-gray-500 py-8">ุณุจุฏ ุฎุฑุฏ ุดูุง ุฎุงู ุงุณุช</div>';
                if (cartSubtotal) cartSubtotal.textContent = '0 ุชููุงู';
                if (cartShipping) cartShipping.textContent = 'ุฑุงฺฏุงู';
                if (cartTotal) cartTotal.textContent = '0 ุชููุงู';
                return;
            }

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal >= 5000000 ? 0 : 200000;
            const total = subtotal + shipping;

            cartItems.innerHTML = cart.map(item => `
                <div class="flex items-center space-x-4 space-x-reverse py-4 border-b border-gray-100">
                    <div class="text-2xl">${item.image}</div>
                    <div class="flex-1">
                        <h4 class="font-medium text-sm">${item.name}</h4>
                        <p class="text-gray-600 text-xs">${item.price.toLocaleString()} ุชููุงู</p>
                    </div>
                    <div class="flex items-center space-x-2 space-x-reverse">
                        <button onclick="updateCartQuantity(${item.id}, -1)" class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-sm">-</button>
                        <span class="text-sm font-medium w-8 text-center">${item.quantity}</span>
                        <button onclick="updateCartQuantity(${item.id}, 1)" class="w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-sm">+</button>
                    </div>
                    <button onclick="removeFromCart(${item.id})" class="text-red-500 hover:text-red-700 text-sm">โ</button>
                </div>
            `).join('');

            if (cartSubtotal) cartSubtotal.textContent = subtotal.toLocaleString() + ' ุชููุงู';
            if (cartShipping) cartShipping.textContent = shipping === 0 ? 'ุฑุงฺฏุงู' : shipping.toLocaleString() + ' ุชููุงู';
            if (cartTotal) cartTotal.textContent = total.toLocaleString() + ' ุชููุงู';
        }

        function toggleCart() {
            const sidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('overlay');
            
            if (!sidebar || !overlay) return;

            const isOpen = !sidebar.classList.contains('translate-x-full');
            
            if (isOpen) {
                sidebar.classList.add('translate-x-full');
                overlay.classList.add('hidden');
            } else {
                sidebar.classList.remove('translate-x-full');
                overlay.classList.remove('hidden');
                updateCartDisplay();
            }
        }

        // Wishlist functions
        function toggleWishlist(productId) {
            const index = wishlist.indexOf(productId);
            if (index > -1) {
                wishlist.splice(index, 1);
                showNotification('ูุญุตูู ุงุฒ ูุณุช ุนูุงููโููุฏโูุง ุญุฐู ุดุฏ');
            } else {
                wishlist.push(productId);
                showNotification('ูุญุตูู ุจู ูุณุช ุนูุงููโููุฏโูุง ุงุถุงูู ุดุฏ');
            }
            
            updateWishlistBadge();
            renderProducts(); // Update heart icons
            saveDataToStorage();
        }

        function updateWishlistBadge() {
            const badge = document.getElementById('wishlistBadge');
            if (badge) {
                badge.textContent = wishlist.length;
                badge.style.display = wishlist.length > 0 ? 'flex' : 'none';
            }
        }

        function showWishlist() {
            const wishlistProducts = products.filter(p => wishlist.includes(p.id));
            
            document.getElementById('wishlistContent').innerHTML = wishlistProducts.length > 0 ? 
                wishlistProducts.map(product => `
                    <div class="flex items-center space-x-4 space-x-reverse py-4 border-b">
                        <div class="text-2xl">${product.image}</div>
                        <div class="flex-1">
                            <h4 class="font-medium">${product.name}</h4>
                            <p class="text-gray-600 text-sm">${product.price.toLocaleString()} ุชููุงู</p>
                        </div>
                        <div class="flex space-x-2 space-x-reverse">
                            <button onclick="addToCart(${product.id})" class="apple-button text-white px-3 py-1 rounded text-sm">
                                ุงูุฒูุฏู ุจู ุณุจุฏ
                            </button>
                            <button onclick="toggleWishlist(${product.id})" class="text-red-500 hover:text-red-700">
                                ุญุฐู
                            </button>
                        </div>
                    </div>
                `).join('') : 
                '<p class="text-gray-500 text-center py-8">ูุณุช ุนูุงููโููุฏโูุง ุฎุงู ุงุณุช</p>';

            document.getElementById('wishlistModal').classList.remove('hidden');
            document.getElementById('wishlistModal').classList.add('flex');
        }

        function closeWishlist() {
            document.getElementById('wishlistModal').classList.add('hidden');
            document.getElementById('wishlistModal').classList.remove('flex');
        }

        // Product detail functions
        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            document.getElementById('productDetailTitle').textContent = product.name;
            document.getElementById('productDetailContent').innerHTML = `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="text-center">
                        <div class="text-8xl mb-4">${product.image}</div>
                        <div class="flex items-center justify-center mb-4">
                            <div class="star-rating">
                                ${'โ'.repeat(Math.floor(product.rating))}${'โ'.repeat(5 - Math.floor(product.rating))}
                            </div>
                            <span class="text-sm text-gray-500 mr-2">${product.rating} (${product.reviews} ูุธุฑ)</span>
                        </div>
                    </div>
                    
                    <div>
                        <h2 class="text-2xl font-semibold mb-4">${product.name}</h2>
                        <p class="text-gray-600 mb-6">${product.description}</p>
                        
                        <div class="mb-6">
                            ${product.originalPrice > product.price ? 
                                `<div class="text-lg text-gray-400 line-through mb-1">${product.originalPrice.toLocaleString()} ุชููุงู</div>` : ''
                            }
                            <div class="text-3xl font-bold text-blue-600">${product.price.toLocaleString()} ุชููุงู</div>
                            ${product.discount > 0 ? `<div class="text-sm text-green-600">ุชุฎูู ${product.discount}%</div>` : ''}
                        </div>

                        <div class="mb-6">
                            <div class="text-sm ${product.stock > 0 ? 'text-green-600' : 'text-red-600'}">
                                ${product.stock > 0 ? `ููุฌูุฏ (${product.stock} ุนุฏุฏ)` : 'ูุงููุฌูุฏ'}
                            </div>
                        </div>

                        <div class="space-y-4 mb-6">
                            <h3 class="font-semibold">ูุดุฎุตุงุช ูู:</h3>
                            ${Object.entries(product.specifications || {}).map(([key, value]) => `
                                <div class="flex justify-between py-2 border-b border-gray-100">
                                    <span class="text-gray-600">${key}:</span>
                                    <span class="font-medium">${value}</span>
                                </div>
                            `).join('')}
                        </div>

                        <div class="flex space-x-4 space-x-reverse">
                            <button onclick="addToCart(${product.id}); closeProductDetail();" 
                                    class="flex-1 apple-button text-white py-3 rounded-xl font-medium ${product.stock === 0 ? 'opacity-50 cursor-not-allowed' : ''}"
                                    ${product.stock === 0 ? 'disabled' : ''}>
                                ุงูุฒูุฏู ุจู ุณุจุฏ ุฎุฑุฏ
                            </button>
                            <button onclick="toggleWishlist(${product.id})" 
                                    class="px-4 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 ${wishlist.includes(product.id) ? 'text-red-500' : 'text-gray-600'}">
                                โค๏ธ
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('productDetailModal').classList.remove('hidden');
            document.getElementById('productDetailModal').classList.add('flex');
        }

        function closeProductDetail() {
            document.getElementById('productDetailModal').classList.add('hidden');
            document.getElementById('productDetailModal').classList.remove('flex');
        }

        // Compare functions
        function addToCompare(productId) {
            if (compareList.includes(productId)) {
                showNotification('ุงู ูุญุตูู ูุจูุงู ุจู ููุงุณู ุงุถุงูู ุดุฏู');
                return;
            }
            
            if (compareList.length >= 3) {
                showNotification('ุญุฏุงฺฉุซุฑ 3 ูุญุตูู ูุงุจู ููุงุณู ุงุณุช');
                return;
            }
            
            compareList.push(productId);
            showNotification('ูุญุตูู ุจู ูุณุช ููุงุณู ุงุถุงูู ุดุฏ');
        }

        function showCompareProducts() {
            if (compareList.length === 0) {
                document.getElementById('compareContent').innerHTML = '<p class="text-gray-500 text-center py-8">ูฺ ูุญุตูู ุจุฑุง ููุงุณู ุงูุชุฎุงุจ ูุดุฏู</p>';
            } else {
                const compareProducts = products.filter(p => compareList.includes(p.id));
                
                document.getElementById('compareContent').innerHTML = `
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr>
                                    <th class="text-right p-4">ูุดุฎุตุงุช</th>
                                    ${compareProducts.map(product => `
                                        <th class="text-center p-4 min-w-48">
                                            <div class="text-4xl mb-2">${product.image}</div>
                                            <div class="font-medium text-sm">${product.name}</div>
                                            <button onclick="removeFromCompare(${product.id})" class="text-red-500 text-xs mt-2">ุญุฐู</button>
                                        </th>
                                    `).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-t">
                                    <td class="p-4 font-medium">ููุช</td>
                                    ${compareProducts.map(product => `
                                        <td class="p-4 text-center">${product.price.toLocaleString()} ุชููุงู</td>
                                    `).join('')}
                                </tr>
                                <tr class="border-t">
                                    <td class="p-4 font-medium">ุงูุชุงุฒ</td>
                                    ${compareProducts.map(product => `
                                        <td class="p-4 text-center">${product.rating} โญ</td>
                                    `).join('')}
                                </tr>
                                <tr class="border-t">
                                    <td class="p-4 font-medium">ููุฌูุฏ</td>
                                    ${compareProducts.map(product => `
                                        <td class="p-4 text-center ${product.stock > 0 ? 'text-green-600' : 'text-red-600'}">
                                            ${product.stock > 0 ? 'ููุฌูุฏ' : 'ูุงููุฌูุฏ'}
                                        </td>
                                    `).join('')}
                                </tr>
                                <tr class="border-t">
                                    <td class="p-4 font-medium">ุจุฑูุฏ</td>
                                    ${compareProducts.map(product => `
                                        <td class="p-4 text-center">${product.brand}</td>
                                    `).join('')}
                                </tr>
                                <tr class="border-t">
                                    <td class="p-4 font-medium">ุนููุงุช</td>
                                    ${compareProducts.map(product => `
                                        <td class="p-4 text-center">
                                            <button onclick="addToCart(${product.id})" class="apple-button text-white px-3 py-1 rounded text-sm">
                                                ุงูุฒูุฏู ุจู ุณุจุฏ
                                            </button>
                                        </td>
                                    `).join('')}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-6 text-center">
                        <button onclick="clearCompareList()" class="px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg">
                            ูพุงฺฉ ฺฉุฑุฏู ููู
                        </button>
                    </div>
                `;
            }

            document.getElementById('compareModal').classList.remove('hidden');
            document.getElementById('compareModal').classList.add('flex');
        }

        // Filter functions
        function filterByBrand(brand) {
            currentFilter = brand;
            currentCategory = 'all';
            displayedProducts = 8;
            renderProducts();
            scrollToProducts();
        }

        function filterByCategory(brand, category) {
            currentFilter = brand;
            currentCategory = category;
            displayedProducts = 8;
            renderProducts();
            scrollToProducts();
        }

        function applyFilters() {
            displayedProducts = 8;
            renderProducts();
        }

        function clearFilters() {
            currentFilter = 'all';
            currentCategory = 'all';
            displayedProducts = 8;
            
            // Reset filter selects
            const priceFilter = document.getElementById('priceFilter');
            const stockFilter = document.getElementById('stockFilter');
            const sortFilter = document.getElementById('sortFilter');
            
            if (priceFilter) priceFilter.value = 'all';
            if (stockFilter) stockFilter.value = 'all';
            if (sortFilter) sortFilter.value = 'newest';
            
            renderProducts();
        }

        function scrollToProducts() {
            const productsSection = document.getElementById('productsSection');
            if (productsSection) {
                productsSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Search functions
        function searchProducts() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const query = document.getElementById('searchInput').value.trim().toLowerCase();
                
                if (query.length < 2) {
                    hideSearchSuggestions();
                    return;
                }

                const suggestions = products.filter(product => 
                    product.name.toLowerCase().includes(query) ||
                    product.brand.toLowerCase().includes(query) ||
                    product.tags.some(tag => tag.toLowerCase().includes(query))
                ).slice(0, 5);

                showSearchSuggestions(suggestions, query);
            }, 300);
        }

        function showSearchSuggestions(suggestions, query) {
            const suggestionsDiv = document.getElementById('searchSuggestions');
            if (!suggestionsDiv) return;

            if (suggestions.length === 0) {
                hideSearchSuggestions();
                return;
            }

            suggestionsDiv.innerHTML = suggestions.map(product => `
                <div class="p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0" onclick="selectProduct(${product.id})">
                    <div class="flex items-center space-x-3 space-x-reverse">
                        <span class="text-lg">${product.image}</span>
                        <div class="flex-1">
                            <div class="font-medium text-sm">${highlightText(product.name, query)}</div>
                            <div class="text-xs text-gray-500">${product.price.toLocaleString()} ุชููุงู</div>
                        </div>
                    </div>
                </div>
            `).join('');

            suggestionsDiv.classList.remove('hidden');
        }

        function hideSearchSuggestions() {
            const suggestionsDiv = document.getElementById('searchSuggestions');
            if (suggestionsDiv) {
                suggestionsDiv.classList.add('hidden');
            }
        }

        function highlightText(text, query) {
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<mark class="bg-yellow-200">$1</mark>');
        }

        function selectProduct(productId) {
            hideSearchSuggestions();
            showProductDetail(productId);
            document.getElementById('searchInput').value = '';
        }

        function handleSearchEnter(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.trim().toLowerCase();
            
            if (query.length < 2) {
                showNotification('ูุทูุงู ุญุฏุงูู 2 ฺฉุงุฑุงฺฉุชุฑ ูุงุฑุฏ ฺฉูุฏ');
                return;
            }

            // Filter products based on search query
            const searchResults = products.filter(product => 
                product.name.toLowerCase().includes(query) ||
                product.brand.toLowerCase().includes(query) ||
                product.description.toLowerCase().includes(query) ||
                product.tags.some(tag => tag.toLowerCase().includes(query))
            );

            // Update display
            const grid = document.getElementById('productsGrid');
            const countElement = document.getElementById('productsCount');
            
            if (searchResults.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-500">ูฺ ูุญุตูู ุงูุช ูุดุฏ</div>';
                if (countElement) countElement.textContent = 'ูฺ ูุญุตูู ุงูุช ูุดุฏ';
            } else {
                // Temporarily override products for display
                const originalProducts = [...products];
                products.splice(0, products.length, ...searchResults);
                renderProducts();
                products.splice(0, products.length, ...originalProducts);
                
                if (countElement) countElement.textContent = `${searchResults.length} ูุญุตูู ุงูุช ุดุฏ`;
            }

            hideSearchSuggestions();
            scrollToProducts();
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98103b87002db905',t:'MTc1ODE5MjEwMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
